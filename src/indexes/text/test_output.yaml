    #5 0xdbdf0e in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdbdf0e in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdbdf0e in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)

SUMMARY: AddressSanitizer: heap-use-after-free /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/atomic_base.h:501 in std::__atomic_base<unsigned int>::load(std::memory_order) const
Shadow bytes around the buggy address:
  0x5060000fd700: fd fd fd fd fd fd fd fd fa fa fa fa fa fa fa fa
  0x5060000fd780: fa fa fa fa fa fa fa fa fd fd fd fd fd fd fd fa
  0x5060000fd800: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa
  0x5060000fd880: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa
  0x5060000fd900: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa
=>0x5060000fd980: fa fa fa fa[fd]fd fd fd fd fd fd fa fa fa fa fa
  0x5060000fda00: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa
  0x5060000fda80: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa
  0x5060000fdb00: fa fa fa fa fd fd fd fd fd fd fd fa fa fa fa fa
  0x5060000fdb80: fa fa fa fa fa fa fa fa fa fa fa fa fd fd fd fd
  0x5060000fdc00: fd fd fd fd fa fa fa fa fd fd fd fd fd fd fd fd
Shadow byte legend (one shadow byte represents 8 application bytes):
  Addressable:           00
  Partially addressable: 01 02 03 04 05 06 07 
  Heap left redzone:       fa
  Freed heap region:       fd
  Stack left redzone:      f1
  Stack mid redzone:       f2
  Stack right redzone:     f3
  Stack after return:      f5
  Stack use after scope:   f8
  Global redzone:          f9
  Global init order:       f6
  Poisoned by user:        f7
  Container overflow:      fc
  Array cookie:            ac
  Intra object redzone:    bb
  ASan internal:           fe
  Left alloca redzone:     ca
  Right alloca redzone:    cb
==5268==ABORTING
 ... failed
Test output can be found here: /local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests.out
➜  valkey-search-3 git:(fulltext) ✗ clear
➜  valkey-search-3 git:(fulltext) ✗ ./build.sh --run-tests=indexes_test --asan
Root directory: /local/home/brenncat/oss-workplace/valkey-search-3
Running test indexes_test
Using extra cmake arguments:  -DSAN_BUILD=address
LSAN_OPTIONS => suppressions=/home/brenncat/oss-workplace/valkey-search-3/ci/asan.supp
ASAN_OPTIONS => detect_odr_violation=0:detect_leaks=1:halt_on_error=1
address sanitizer build is enabled
Checking if configure is required...no
Checking for cmake...ok
Checking for g++...ok
Checking for gcc...ok
Checking for ninja-build...ok
Checking ICU dependencies...
ICU static libraries found in build directory
Building
ninja: no work to do.

Build Successful!

Module path: /local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/libsearch.so

To load the module, execute the following command:
    valkey-server --loadmodule /local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/libsearch.so

Running: /local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_testRunning main() from /local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/.deps/googletest/googletest/src/gtest_main.cc
[==========] Running 136 tests from 16 test suites.
[----------] Global test environment set-up.
[----------] 2 tests from IndexSchemaBackfillTest
[ RUN      ] IndexSchemaBackfillTest.PerformBackfill_NoOngoingBackfillTest
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:119: Starting backfill for index schema in DB 0: index_schema_name (size: 0)
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:861: Index schema index_schema_name finished backfill. Scanned 0 keys in 254.273us
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:297: Index schema index_schema_name dropped from DB 0
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:119: Starting backfill for index schema in DB 0: index_schema_name (size: 0)
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:861: Index schema index_schema_name finished backfill. Scanned 0 keys in 85.196us
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:297: Index schema index_schema_name dropped from DB 0
[       OK ] IndexSchemaBackfillTest.PerformBackfill_NoOngoingBackfillTest (1 ms)
[ RUN      ] IndexSchemaBackfillTest.PerformBackfill_SwapDB
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:119: Starting backfill for index schema in DB 0: index_schema_name (size: 0)

GMOCK WARNING:
Uninteresting mock function call - taking default action specified at:
/testing/common.h:259:
    Function call: OnSwapDB(0x7f1d5254a1e0)
NOTE: You can safely ignore the above warning unless this call should not happen.  Do not suppress it by adding an EXPECT_CALL() if you don't mean to enforce the call.  See https://github.com/google/googletest/blob/main/docs/gmock_cook_book.md#knowing-when-to-expect-useoncall for details.

GMOCK WARNING:
Uninteresting mock function call - taking default action specified at:
/testing/common.h:259:
    Function call: OnSwapDB(0x7f1d5254a1e0)
NOTE: You can safely ignore the above warning unless this call should not happen.  Do not suppress it by adding an EXPECT_CALL() if you don't mean to enforce the call.  See https://github.com/google/googletest/blob/main/docs/gmock_cook_book.md#knowing-when-to-expect-useoncall for details.
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:297: Index schema index_schema_name dropped from DB 0
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:119: Starting backfill for index schema in DB 0: index_schema_name (size: 0)

GMOCK WARNING:
Uninteresting mock function call - taking default action specified at:
/testing/common.h:259:
    Function call: OnSwapDB(0x7f1d5254a1e0)
NOTE: You can safely ignore the above warning unless this call should not happen.  Do not suppress it by adding an EXPECT_CALL() if you don't mean to enforce the call.  See https://github.com/google/googletest/blob/main/docs/gmock_cook_book.md#knowing-when-to-expect-useoncall for details.

GMOCK WARNING:
Uninteresting mock function call - taking default action specified at:
/testing/common.h:259:
    Function call: OnSwapDB(0x7f1d5254a1e0)
NOTE: You can safely ignore the above warning unless this call should not happen.  Do not suppress it by adding an EXPECT_CALL() if you don't mean to enforce the call.  See https://github.com/google/googletest/blob/main/docs/gmock_cook_book.md#knowing-when-to-expect-useoncall for details.
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:297: Index schema index_schema_name dropped from DB 0
[       OK ] IndexSchemaBackfillTest.PerformBackfill_SwapDB (1 ms)
[----------] 2 tests from IndexSchemaBackfillTest (2 ms total)

[----------] 4 tests from IndexSchemaRDBTest
[ RUN      ] IndexSchemaRDBTest.SaveAndLoad
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:119: Starting backfill for index schema in DB 0: index_schema_name (size: 0)
TestValkey[warning]: [debug], tid: 139763979493760, /src/index_schema.cc:460: Add succeeded with result: OK
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:1110: Starting to save attribute: hnsw_attribute
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:1078: Writing supplemental section type SUPPLEMENTAL_CONTENT_INDEX_CONTENT
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:1078: Writing supplemental section type SUPPLEMENTAL_CONTENT_KEY_TO_ID_MAP
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:1110: Starting to save attribute: flat_attribute
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:1078: Writing supplemental section type SUPPLEMENTAL_CONTENT_INDEX_CONTENT
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:1078: Writing supplemental section type SUPPLEMENTAL_CONTENT_KEY_TO_ID_MAP
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:1110: Starting to save attribute: numeric_attribute
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:1078: Writing supplemental section type SUPPLEMENTAL_CONTENT_INDEX_CONTENT
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:1110: Starting to save attribute: tag_attribute
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:1078: Writing supplemental section type SUPPLEMENTAL_CONTENT_INDEX_CONTENT

GMOCK WARNING:
Uninteresting mock function call - taking default action specified at:
/testing/common.h:263:
    Function call: RDBSave(0x7f1d5276e440)
          Returns: OK
NOTE: You can safely ignore the above warning unless this call should not happen.  Do not suppress it by adding an EXPECT_CALL() if you don't mean to enforce the call.  See https://github.com/google/googletest/blob/main/docs/gmock_cook_book.md#knowing-when-to-expect-useoncall for details.
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:297: Index schema index_schema_name dropped from DB 0
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:119: Starting backfill for index schema in DB 0: index_schema_name (size: 0)
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:1397: Loading Index Content for attribute: hnsw_attribute
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:1411: Loading Key to ID Map Content for attribute: hnsw_attribute
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:1397: Loading Index Content for attribute: flat_attribute
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:1411: Loading Key to ID Map Content for attribute: flat_attribute
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:1397: Loading Index Content for attribute: numeric_attribute
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:1397: Loading Index Content for attribute: tag_attribute
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:297: Index schema index_schema_name dropped from DB 0
[       OK ] IndexSchemaRDBTest.SaveAndLoad (14 ms)
[ RUN      ] IndexSchemaRDBTest.SaveAndLoadTextIndex
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:119: Starting backfill for index schema in DB 0: text_index_schema (size: 0)
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:1110: Starting to save attribute: description
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:1078: Writing supplemental section type SUPPLEMENTAL_CONTENT_INDEX_CONTENT

GMOCK WARNING:
Uninteresting mock function call - taking default action specified at:
/testing/common.h:263:
    Function call: RDBSave(0x7f1d5262b8c0)
          Returns: OK
NOTE: You can safely ignore the above warning unless this call should not happen.  Do not suppress it by adding an EXPECT_CALL() if you don't mean to enforce the call.  See https://github.com/google/googletest/blob/main/docs/gmock_cook_book.md#knowing-when-to-expect-useoncall for details.
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:297: Index schema text_index_schema dropped from DB 0
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:119: Starting backfill for index schema in DB 0: text_index_schema (size: 0)
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:1397: Loading Index Content for attribute: description
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:297: Index schema text_index_schema dropped from DB 0
[       OK ] IndexSchemaRDBTest.SaveAndLoadTextIndex (1 ms)
[ RUN      ] IndexSchemaRDBTest.LoadEndedDeletesOrphanedKeys
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:119: Starting backfill for index schema in DB 0: index_schema_name (size: 0)
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:1525: Deleting 2 stale entries of 3 total keys for {Index: index_schema_name, Attribute: attribute}
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:1530: Deleting 2 stale entries for {Index: index_schema_name}
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:1537: Scanned index schema index_schema_name for stale entries in 175.336us

GMOCK WARNING:
Uninteresting mock function call - taking default action specified at:
/testing/common.h:255:
    Function call: OnLoadingEnded(0x511000029bd0)
NOTE: You can safely ignore the above warning unless this call should not happen.  Do not suppress it by adding an EXPECT_CALL() if you don't mean to enforce the call.  See https://github.com/google/googletest/blob/main/docs/gmock_cook_book.md#knowing-when-to-expect-useoncall for details.

GMOCK WARNING:
Uninteresting mock function call - returning default value.
    Function call: IsTracked(@0x50600001e708 key2)
          Returns: false
NOTE: You can safely ignore the above warning unless this call should not happen.  Do not suppress it by adding an EXPECT_CALL() if you don't mean to enforce the call.  See https://github.com/google/googletest/blob/main/docs/gmock_cook_book.md#knowing-when-to-expect-useoncall for details.

GMOCK WARNING:
Uninteresting mock function call - returning default value.
    Function call: IsTracked(@0x50600001e768 key1)
          Returns: false
NOTE: You can safely ignore the above warning unless this call should not happen.  Do not suppress it by adding an EXPECT_CALL() if you don't mean to enforce the call.  See https://github.com/google/googletest/blob/main/docs/gmock_cook_book.md#knowing-when-to-expect-useoncall for details.
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:297: Index schema index_schema_name dropped from DB 0
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:119: Starting backfill for index schema in DB 0: index_schema_name (size: 0)
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:1525: Deleting 2 stale entries of 3 total keys for {Index: index_schema_name, Attribute: attribute}
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:1530: Deleting 2 stale entries for {Index: index_schema_name}

GMOCK WARNING:
Uninteresting mock function call - returning default value.
    Function call: IsTracked(@0x7f1d525bb190 key2)
          Returns: false
NOTE: You can safely ignore the above warning unless this call should not happen.  Do not suppress it by adding an EXPECT_CALL() if you don't mean to enforce the call.  See https://github.com/google/googletest/blob/main/docs/gmock_cook_book.md#knowing-when-to-expect-useoncall for details.

GMOCK WARNING:
Uninteresting mock function call - returning default value.
    Function call: IsTracked(@0x7f1d525bb190 key1)
          Returns: false
NOTE: You can safely ignore the above warning unless this call should not happen.  Do not suppress it by adding an EXPECT_CALL() if you don't mean to enforce the call.  See https://github.com/google/googletest/blob/main/docs/gmock_cook_book.md#knowing-when-to-expect-useoncall for details.
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:1537: Scanned index schema index_schema_name for stale entries in 361.177us

GMOCK WARNING:
Uninteresting mock function call - taking default action specified at:
/testing/common.h:255:
    Function call: OnLoadingEnded(0x511000029bd0)
NOTE: You can safely ignore the above warning unless this call should not happen.  Do not suppress it by adding an EXPECT_CALL() if you don't mean to enforce the call.  See https://github.com/google/googletest/blob/main/docs/gmock_cook_book.md#knowing-when-to-expect-useoncall for details.
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:297: Index schema index_schema_name dropped from DB 0
[       OK ] IndexSchemaRDBTest.LoadEndedDeletesOrphanedKeys (2 ms)
[ RUN      ] IndexSchemaRDBTest.ComprehensiveSkipLoadTest
WARNING: All log messages before absl::InitializeLog() is called are written to STDERR
I0000 00:00:1765520812.249201    6806 index_schema_test.cc:1788] === Comprehensive Skip Load Test Started ===
I0000 00:00:1765520812.249231    6806 index_schema_test.cc:1791] STEP 1: Creating vector index with 1000 vectors
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:119: Starting backfill for index schema in DB 0: comprehensive_test (size: 0)
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:1110: Starting to save attribute: embedding
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:1078: Writing supplemental section type SUPPLEMENTAL_CONTENT_INDEX_CONTENT
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:1078: Writing supplemental section type SUPPLEMENTAL_CONTENT_KEY_TO_ID_MAP

GMOCK WARNING:
Uninteresting mock function call - taking default action specified at:
/testing/common.h:263:
    Function call: RDBSave(0x7f1d52806160)
          Returns: OK
NOTE: You can safely ignore the above warning unless this call should not happen.  Do not suppress it by adding an EXPECT_CALL() if you don't mean to enforce the call.  See https://github.com/google/googletest/blob/main/docs/gmock_cook_book.md#knowing-when-to-expect-useoncall for details.
I0000 00:00:1765520812.395394    6806 index_schema_test.cc:1831] ✓ Step 1 completed - saved 1000 vectors to RDB
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:297: Index schema comprehensive_test dropped from DB 0
I0000 00:00:1765520812.397251    6806 index_schema_test.cc:1837] STEP 2: Testing normal load vs skip load for vector index
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:119: Starting backfill for index schema in DB 0: comprehensive_test (size: 0)
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:1397: Loading Index Content for attribute: embedding
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:1411: Loading Key to ID Map Content for attribute: embedding
I0000 00:00:1765520812.421535    6806 index_schema_test.cc:1865] ✓ Normal load verified - 1000 vectors loaded
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:297: Index schema comprehensive_test dropped from DB 0
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:119: Starting backfill for index schema in DB 0: comprehensive_test (size: 1000)
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:1359: Skipping supplemental content section (due to configuration)
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:1359: Skipping supplemental content section (due to configuration)
I0000 00:00:1765520812.430382    6806 index_schema_test.cc:1930] ✓ Skip load verified - index empty, backfill ready
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:297: Index schema comprehensive_test dropped from DB 0
I0000 00:00:1765520812.430701    6806 index_schema_test.cc:1934] STEP 3: Index dropped (implicit)
I0000 00:00:1765520812.430715    6806 index_schema_test.cc:1938] STEP 4: Creating mixed schema with vector + numeric + tag + text indexes
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:119: Starting backfill for index schema in DB 0: comprehensive_test (size: 1000)
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:1110: Starting to save attribute: category
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:1078: Writing supplemental section type SUPPLEMENTAL_CONTENT_INDEX_CONTENT
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:1110: Starting to save attribute: description
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:1078: Writing supplemental section type SUPPLEMENTAL_CONTENT_INDEX_CONTENT
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:1110: Starting to save attribute: embedding
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:1078: Writing supplemental section type SUPPLEMENTAL_CONTENT_INDEX_CONTENT
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:1078: Writing supplemental section type SUPPLEMENTAL_CONTENT_KEY_TO_ID_MAP
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:1110: Starting to save attribute: price
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:1078: Writing supplemental section type SUPPLEMENTAL_CONTENT_INDEX_CONTENT

GMOCK WARNING:
Uninteresting mock function call - taking default action specified at:
/testing/common.h:263:
    Function call: RDBSave(0x7f1d52806340)
          Returns: OK
NOTE: You can safely ignore the above warning unless this call should not happen.  Do not suppress it by adding an EXPECT_CALL() if you don't mean to enforce the call.  See https://github.com/google/googletest/blob/main/docs/gmock_cook_book.md#knowing-when-to-expect-useoncall for details.
I0000 00:00:1765520812.610827    6806 index_schema_test.cc:2033] ✓ Step 4 completed - saved mixed index with 1000 records
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:297: Index schema comprehensive_test dropped from DB 0
I0000 00:00:1765520812.614485    6806 index_schema_test.cc:2038] STEP 5: Testing mixed index normal vs skip load
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:119: Starting backfill for index schema in DB 0: comprehensive_test (size: 1000)
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:1397: Loading Index Content for attribute: category
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:1397: Loading Index Content for attribute: description
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:1397: Loading Index Content for attribute: embedding
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:1411: Loading Key to ID Map Content for attribute: embedding
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:1397: Loading Index Content for attribute: price
I0000 00:00:1765520812.645146    6806 index_schema_test.cc:2076] ✓ Mixed index normal load verified
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:297: Index schema comprehensive_test dropped from DB 0
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:119: Starting backfill for index schema in DB 0: comprehensive_test (size: 1000)
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:1359: Skipping supplemental content section (due to configuration)
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:1359: Skipping supplemental content section (due to configuration)
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:1359: Skipping supplemental content section (due to configuration)
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:1359: Skipping supplemental content section (due to configuration)
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:1359: Skipping supplemental content section (due to configuration)
I0000 00:00:1765520812.654128    6806 index_schema_test.cc:2150] ✓ Mixed index skip load verified
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:297: Index schema comprehensive_test dropped from DB 0
I0000 00:00:1765520812.654442    6806 index_schema_test.cc:2154] STEPS 6-7: Creating additional indexes with 100 vectors each
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:119: Starting backfill for index schema in DB 0: comprehensive_test (size: 1000)
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:1110: Starting to save attribute: embedding1
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:1078: Writing supplemental section type SUPPLEMENTAL_CONTENT_INDEX_CONTENT
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:1078: Writing supplemental section type SUPPLEMENTAL_CONTENT_KEY_TO_ID_MAP
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:1110: Starting to save attribute: embedding3
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:1078: Writing supplemental section type SUPPLEMENTAL_CONTENT_INDEX_CONTENT
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:1078: Writing supplemental section type SUPPLEMENTAL_CONTENT_KEY_TO_ID_MAP
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:1110: Starting to save attribute: embedding2
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:1078: Writing supplemental section type SUPPLEMENTAL_CONTENT_INDEX_CONTENT
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:1078: Writing supplemental section type SUPPLEMENTAL_CONTENT_KEY_TO_ID_MAP

GMOCK WARNING:
Uninteresting mock function call - taking default action specified at:
/testing/common.h:263:
    Function call: RDBSave(0x7f1d52806520)
          Returns: OK
NOTE: You can safely ignore the above warning unless this call should not happen.  Do not suppress it by adding an EXPECT_CALL() if you don't mean to enforce the call.  See https://github.com/google/googletest/blob/main/docs/gmock_cook_book.md#knowing-when-to-expect-useoncall for details.
I0000 00:00:1765520812.669929    6806 index_schema_test.cc:2249] ✓ Steps 6-7 completed - saved 3 indexes with 100 vectors each
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:297: Index schema comprehensive_test dropped from DB 0
I0000 00:00:1765520812.670970    6806 index_schema_test.cc:2255] === Comprehensive Skip Load Test Completed ===
[       OK ] IndexSchemaRDBTest.ComprehensiveSkipLoadTest (422 ms)
[----------] 4 tests from IndexSchemaRDBTest (440 ms total)

[----------] 3 tests from IndexSchemaFriendTest
[ RUN      ] IndexSchemaFriendTest.MutatedAttributesSanity
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:119: Starting backfill for index schema in DB 0: index_schema_name (size: 0)
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:297: Index schema index_schema_name dropped from DB 0
[       OK ] IndexSchemaFriendTest.MutatedAttributesSanity (3 ms)
[ RUN      ] IndexSchemaFriendTest.MutatedAttributes
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:119: Starting backfill for index schema in DB 0: index_schema_name (size: 0)
I0000 00:00:1765520812.677396    6806 index_schema_test.cc:1577] Starting test
I0000 00:00:1765520812.677438    6806 index_schema_test.cc:1602] consumed_data size: 1
I0000 00:00:1765520812.677462    6806 index_schema_test.cc:1577] Starting test
I0000 00:00:1765520812.677480    6806 index_schema_test.cc:1602] consumed_data size: 1
I0000 00:00:1765520812.677497    6806 index_schema_test.cc:1616] track_after_consumption_data_ptr is not empty
I0000 00:00:1765520812.677523    6806 index_schema_test.cc:1577] Starting test
I0000 00:00:1765520812.677542    6806 index_schema_test.cc:1586] track_before_consumption_data_ptr is not empty
I0000 00:00:1765520812.677561    6806 index_schema_test.cc:1602] consumed_data size: 1
I0000 00:00:1765520812.677579    6806 index_schema_test.cc:1607] before consumed_data due to track_before_consumption_data_ptr not empty: 1
I0000 00:00:1765520812.677593    6806 index_schema_test.cc:1577] Starting test
I0000 00:00:1765520812.677611    6806 index_schema_test.cc:1586] track_before_consumption_data_ptr is not empty
I0000 00:00:1765520812.677629    6806 index_schema_test.cc:1602] consumed_data size: 1
I0000 00:00:1765520812.677656    6806 index_schema_test.cc:1607] before consumed_data due to track_before_consumption_data_ptr not empty: 1
I0000 00:00:1765520812.677668    6806 index_schema_test.cc:1616] track_after_consumption_data_ptr is not empty
I0000 00:00:1765520812.677693    6806 index_schema_test.cc:1577] Starting test
I0000 00:00:1765520812.677711    6806 index_schema_test.cc:1602] consumed_data size: 1
I0000 00:00:1765520812.677728    6806 index_schema_test.cc:1577] Starting test
I0000 00:00:1765520812.677744    6806 index_schema_test.cc:1602] consumed_data size: 1
I0000 00:00:1765520812.677761    6806 index_schema_test.cc:1616] track_after_consumption_data_ptr is not empty
I0000 00:00:1765520812.677785    6806 index_schema_test.cc:1577] Starting test
I0000 00:00:1765520812.677804    6806 index_schema_test.cc:1586] track_before_consumption_data_ptr is not empty
I0000 00:00:1765520812.677822    6806 index_schema_test.cc:1602] consumed_data size: 1
I0000 00:00:1765520812.677839    6806 index_schema_test.cc:1607] before consumed_data due to track_before_consumption_data_ptr not empty: 1
I0000 00:00:1765520812.677853    6806 index_schema_test.cc:1577] Starting test
I0000 00:00:1765520812.677871    6806 index_schema_test.cc:1586] track_before_consumption_data_ptr is not empty
I0000 00:00:1765520812.677887    6806 index_schema_test.cc:1602] consumed_data size: 1
I0000 00:00:1765520812.677904    6806 index_schema_test.cc:1607] before consumed_data due to track_before_consumption_data_ptr not empty: 1
I0000 00:00:1765520812.677926    6806 index_schema_test.cc:1616] track_after_consumption_data_ptr is not empty
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:297: Index schema index_schema_name dropped from DB 0
[       OK ] IndexSchemaFriendTest.MutatedAttributes (3 ms)
[ RUN      ] IndexSchemaFriendTest.ConsistencyTest
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:119: Starting backfill for index schema in DB 0: index_schema_name (size: 0)
TestValkey[warning]: [warning], tid: 139763713795840, /src/indexes/vector_hnsw.cc:270: Resizing HNSW Index, current size: 1000, expand by: 10240, resize time took: 339.708us
TestValkey[warning]: [notice], tid: 139763979493760, /src/index_schema.cc:297: Index schema index_schema_name dropped from DB 0
[       OK ] IndexSchemaFriendTest.ConsistencyTest (3040 ms)
[----------] 3 tests from IndexSchemaFriendTest (3048 ms total)

[----------] 1 test from IndexSchemaTest
[ RUN      ] IndexSchemaTest.ShouldBlockClient
[       OK ] IndexSchemaTest.ShouldBlockClient (0 ms)
[----------] 1 test from IndexSchemaTest (0 ms total)

[----------] 3 tests from LexerTest
[ RUN      ] LexerTest.InvalidUTF8
[       OK ] LexerTest.InvalidUTF8 (0 ms)
[ RUN      ] LexerTest.LongWord
[       OK ] LexerTest.LongWord (0 ms)
[ RUN      ] LexerTest.EmptyStopWordsHandling
[       OK ] LexerTest.EmptyStopWordsHandling (0 ms)
[----------] 3 tests from LexerTest (0 ms total)

[----------] 7 tests from NumericIndexTest
[ RUN      ] NumericIndexTest.SimpleAddModifyRemove
[       OK ] NumericIndexTest.SimpleAddModifyRemove (0 ms)
[ RUN      ] NumericIndexTest.SimpleAddModifyRemove1
[       OK ] NumericIndexTest.SimpleAddModifyRemove1 (0 ms)
[ RUN      ] NumericIndexTest.ModifyWithNonNumericString
[       OK ] NumericIndexTest.ModifyWithNonNumericString (0 ms)
[ RUN      ] NumericIndexTest.RangeSearchInclusiveExclusive
[       OK ] NumericIndexTest.RangeSearchInclusiveExclusive (0 ms)
[ RUN      ] NumericIndexTest.RangeSearchInclusiveExclusive1
[       OK ] NumericIndexTest.RangeSearchInclusiveExclusive1 (0 ms)
[ RUN      ] NumericIndexTest.RangeSearchNegate
[       OK ] NumericIndexTest.RangeSearchNegate (0 ms)
[ RUN      ] NumericIndexTest.DeletedKeysNegativeSearchTest
[       OK ] NumericIndexTest.DeletedKeysNegativeSearchTest (0 ms)
[----------] 7 tests from NumericIndexTest (2 ms total)

[----------] 11 tests from PostingTest
[ RUN      ] PostingTest.InsertionCounters
[       OK ] PostingTest.InsertionCounters (0 ms)
[ RUN      ] PostingTest.RemoveKey
[       OK ] PostingTest.RemoveKey (0 ms)
[ RUN      ] PostingTest.KeyIteratorBasic
[       OK ] PostingTest.KeyIteratorBasic (0 ms)
[ RUN      ] PostingTest.KeyIteratorSkipForward
[       OK ] PostingTest.KeyIteratorSkipForward (0 ms)
[ RUN      ] PostingTest.PositionIteratorBasic
[       OK ] PostingTest.PositionIteratorBasic (0 ms)
[ RUN      ] PostingTest.PositionIteratorSkipForward
[       OK ] PostingTest.PositionIteratorSkipForward (0 ms)
[ RUN      ] PostingTest.IteratorWithMultipleFields
[       OK ] PostingTest.IteratorWithMultipleFields (0 ms)
[ RUN      ] PostingTest.EmptyPostingIterators
[       OK ] PostingTest.EmptyPostingIterators (0 ms)
[ RUN      ] PostingTest.ContainsFieldsCheck
[       OK ] PostingTest.ContainsFieldsCheck (0 ms)
[ RUN      ] PostingTest.LargeScaleOperations
[       OK ] PostingTest.LargeScaleOperations (56 ms)
[ RUN      ] PostingTest.FieldMaskImplementations
[       OK ] PostingTest.FieldMaskImplementations (0 ms)
[----------] 11 tests from PostingTest (59 ms total)

[----------] 12 tests from TagIndexTest
[ RUN      ] TagIndexTest.AddRecordAndSearchTest
[       OK ] TagIndexTest.AddRecordAndSearchTest (0 ms)
[ RUN      ] TagIndexTest.RemoveRecordAndSearchTest
[       OK ] TagIndexTest.RemoveRecordAndSearchTest (0 ms)
[ RUN      ] TagIndexTest.ModifyRecordAndSearchTest
[       OK ] TagIndexTest.ModifyRecordAndSearchTest (0 ms)
[ RUN      ] TagIndexTest.ModifyRecordWithEmptyString
[       OK ] TagIndexTest.ModifyRecordWithEmptyString (0 ms)
[ RUN      ] TagIndexTest.KeyTrackingTest
[       OK ] TagIndexTest.KeyTrackingTest (0 ms)
[ RUN      ] TagIndexTest.PrefixSearchHappyTest
[       OK ] TagIndexTest.PrefixSearchHappyTest (0 ms)
[ RUN      ] TagIndexTest.PrefixSearchCaseInsensitiveTest
[       OK ] TagIndexTest.PrefixSearchCaseInsensitiveTest (0 ms)
[ RUN      ] TagIndexTest.PrefixSearchInvalidTagTest
[       OK ] TagIndexTest.PrefixSearchInvalidTagTest (0 ms)
[ RUN      ] TagIndexTest.PrefixSearchMinLengthNotSatisfiedTest
[       OK ] TagIndexTest.PrefixSearchMinLengthNotSatisfiedTest (0 ms)
[ RUN      ] TagIndexTest.PrefixSearchMinLengthSatisfiedTest
[       OK ] TagIndexTest.PrefixSearchMinLengthSatisfiedTest (0 ms)
[ RUN      ] TagIndexTest.NegativeSearchTest
[       OK ] TagIndexTest.NegativeSearchTest (0 ms)
[ RUN      ] TagIndexTest.DeletedKeysNegativeSearchTest
[       OK ] TagIndexTest.DeletedKeysNegativeSearchTest (0 ms)
[----------] 12 tests from TagIndexTest (3 ms total)

[----------] 3 tests from TextTest
[ RUN      ] TextTest.LargeDocumentTokenization
AddRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xdbdb6a in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::AddRef() /src/indexes/text/invasive_ptr.h:161
    #2 0xdbdb6a in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::InvasivePtr(valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings> const&) /src/indexes/text/invasive_ptr.h:71
    #3 0xdbdb6a in operator() /src/indexes/text/text_index.cc:243
    #4 0xdbdb6a in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdbdb6a in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdbdb6a in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdbdb6a in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdbe01c in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::operator=(valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>&&) /src/indexes/text/invasive_ptr.h:98
    #3 0xdbe01c in AddKeyToPostings /src/indexes/text/text_index.cc:37
    #4 0xdbe01c in operator() /src/indexes/text/text_index.cc:243
    #5 0xdbe01c in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #6 0xdbe01c in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #7 0xdbe01c in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #8 0xdbe01c in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #9 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #10 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #11 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #12 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #13 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #14 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #15 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #16 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #17 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #18 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #19 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #20 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #21 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #22 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #23 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #24 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #25 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdbe06e in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdbe06e in AddKeyToPostings /src/indexes/text/text_index.cc:37
    #4 0xdbe06e in operator() /src/indexes/text/text_index.cc:243
    #5 0xdbe06e in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #6 0xdbe06e in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #7 0xdbe06e in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #8 0xdbe06e in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #9 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #10 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #11 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #12 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #13 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #14 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #15 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #16 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #17 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #18 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #19 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #20 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #21 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #22 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #23 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #24 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #25 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdbe4b6 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdbe4b6 in operator() /src/indexes/text/text_index.cc:243
    #4 0xdbe4b6 in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdbe4b6 in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdbe4b6 in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdbe4b6 in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdbe4f4 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::operator=(valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings> const&) /src/indexes/text/invasive_ptr.h:75
    #3 0xdbe4f4 in operator() /src/indexes/text/text_index.cc:246
    #4 0xdbe4f4 in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdbe4f4 in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdbe4f4 in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdbe4f4 in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

AddRef() ptr_=0x50600003b060 refcount=1 -> 2
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xdbe7d0 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::AddRef() /src/indexes/text/invasive_ptr.h:161
    #2 0xdbe7d0 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::operator=(valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings> const&) /src/indexes/text/invasive_ptr.h:77
    #3 0xdbe7d0 in operator() /src/indexes/text/text_index.cc:246
    #4 0xdbe7d0 in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdbe7d0 in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdbe7d0 in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdbe7d0 in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdbe806 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdbe806 in operator() /src/indexes/text/text_index.cc:250
    #4 0xdbe806 in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdbe806 in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdbe806 in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdbe806 in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdbe812 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdbe812 in operator() /src/indexes/text/text_index.cc:250
    #4 0xdbe812 in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdbe812 in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdbe812 in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdbe812 in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

AddRef() ptr_=0x50600003b060 refcount=2 -> 3
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xdb630b in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::AddRef() /src/indexes/text/invasive_ptr.h:161
    #2 0xdb630b in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::InvasivePtr(valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings> const&) /src/indexes/text/invasive_ptr.h:71
    #3 0xdb630b in operator() /src/indexes/text/text_index.cc:263
    #4 0xdb630b in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdb630b in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdb630b in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdb630b in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbbc4e in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:278
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdb6335 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdb6335 in operator() /src/indexes/text/text_index.cc:265
    #4 0xdb6335 in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdb6335 in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdb6335 in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdb6335 in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbbc4e in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:278
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdb633e in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdb633e in operator() /src/indexes/text/text_index.cc:265
    #4 0xdb633e in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdb633e in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdb633e in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdb633e in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbbc4e in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:278
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0x50600003b060 refcount=3 -> 2
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdbbf2f in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdbbf2f in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:283
    #4 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #5 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #6 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #7 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #8 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #9 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #10 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #11 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #12 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #13 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #14 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #15 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

AddRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xdbdb6a in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::AddRef() /src/indexes/text/invasive_ptr.h:161
    #2 0xdbdb6a in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::InvasivePtr(valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings> const&) /src/indexes/text/invasive_ptr.h:71
    #3 0xdbdb6a in operator() /src/indexes/text/text_index.cc:243
    #4 0xdbdb6a in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdbdb6a in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdbdb6a in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdbdb6a in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdbe01c in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::operator=(valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>&&) /src/indexes/text/invasive_ptr.h:98
    #3 0xdbe01c in AddKeyToPostings /src/indexes/text/text_index.cc:37
    #4 0xdbe01c in operator() /src/indexes/text/text_index.cc:243
    #5 0xdbe01c in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #6 0xdbe01c in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #7 0xdbe01c in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #8 0xdbe01c in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #9 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #10 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #11 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #12 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #13 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #14 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #15 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #16 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #17 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #18 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #19 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #20 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #21 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #22 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #23 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #24 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #25 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdbe06e in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdbe06e in AddKeyToPostings /src/indexes/text/text_index.cc:37
    #4 0xdbe06e in operator() /src/indexes/text/text_index.cc:243
    #5 0xdbe06e in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #6 0xdbe06e in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #7 0xdbe06e in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #8 0xdbe06e in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #9 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #10 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #11 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #12 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #13 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #14 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #15 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #16 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #17 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #18 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #19 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #20 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #21 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #22 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #23 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #24 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #25 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdbe4b6 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdbe4b6 in operator() /src/indexes/text/text_index.cc:243
    #4 0xdbe4b6 in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdbe4b6 in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdbe4b6 in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdbe4b6 in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdbe4f4 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::operator=(valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings> const&) /src/indexes/text/invasive_ptr.h:75
    #3 0xdbe4f4 in operator() /src/indexes/text/text_index.cc:246
    #4 0xdbe4f4 in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdbe4f4 in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdbe4f4 in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdbe4f4 in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

AddRef() ptr_=0x50600003afa0 refcount=1 -> 2
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xdbe7d0 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::AddRef() /src/indexes/text/invasive_ptr.h:161
    #2 0xdbe7d0 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::operator=(valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings> const&) /src/indexes/text/invasive_ptr.h:77
    #3 0xdbe7d0 in operator() /src/indexes/text/text_index.cc:246
    #4 0xdbe7d0 in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdbe7d0 in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdbe7d0 in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdbe7d0 in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdbe806 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdbe806 in operator() /src/indexes/text/text_index.cc:250
    #4 0xdbe806 in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdbe806 in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdbe806 in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdbe806 in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdbe812 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdbe812 in operator() /src/indexes/text/text_index.cc:250
    #4 0xdbe812 in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdbe812 in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdbe812 in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdbe812 in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

AddRef() ptr_=0x50600003afa0 refcount=2 -> 3
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xdb630b in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::AddRef() /src/indexes/text/invasive_ptr.h:161
    #2 0xdb630b in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::InvasivePtr(valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings> const&) /src/indexes/text/invasive_ptr.h:71
    #3 0xdb630b in operator() /src/indexes/text/text_index.cc:263
    #4 0xdb630b in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdb630b in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdb630b in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdb630b in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbbc4e in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:278
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdb6335 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdb6335 in operator() /src/indexes/text/text_index.cc:265
    #4 0xdb6335 in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdb6335 in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdb6335 in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdb6335 in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbbc4e in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:278
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdb633e in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdb633e in operator() /src/indexes/text/text_index.cc:265
    #4 0xdb633e in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdb633e in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdb633e in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdb633e in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbbc4e in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:278
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0x50600003afa0 refcount=3 -> 2
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdbbf2f in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdbbf2f in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:283
    #4 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #5 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #6 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #7 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #8 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #9 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #10 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #11 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #12 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #13 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #14 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #15 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

AddRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xdbdb6a in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::AddRef() /src/indexes/text/invasive_ptr.h:161
    #2 0xdbdb6a in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::InvasivePtr(valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings> const&) /src/indexes/text/invasive_ptr.h:71
    #3 0xdbdb6a in operator() /src/indexes/text/text_index.cc:243
    #4 0xdbdb6a in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdbdb6a in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdbdb6a in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdbdb6a in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdbe01c in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::operator=(valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>&&) /src/indexes/text/invasive_ptr.h:98
    #3 0xdbe01c in AddKeyToPostings /src/indexes/text/text_index.cc:37
    #4 0xdbe01c in operator() /src/indexes/text/text_index.cc:243
    #5 0xdbe01c in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #6 0xdbe01c in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #7 0xdbe01c in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #8 0xdbe01c in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #9 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #10 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #11 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #12 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #13 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #14 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #15 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #16 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #17 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #18 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #19 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #20 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #21 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #22 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #23 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #24 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #25 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdbe06e in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdbe06e in AddKeyToPostings /src/indexes/text/text_index.cc:37
    #4 0xdbe06e in operator() /src/indexes/text/text_index.cc:243
    #5 0xdbe06e in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #6 0xdbe06e in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #7 0xdbe06e in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #8 0xdbe06e in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #9 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #10 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #11 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #12 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #13 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #14 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #15 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #16 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #17 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #18 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #19 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #20 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #21 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #22 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #23 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #24 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #25 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdbe4b6 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdbe4b6 in operator() /src/indexes/text/text_index.cc:243
    #4 0xdbe4b6 in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdbe4b6 in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdbe4b6 in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdbe4b6 in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdbe4f4 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::operator=(valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings> const&) /src/indexes/text/invasive_ptr.h:75
    #3 0xdbe4f4 in operator() /src/indexes/text/text_index.cc:246
    #4 0xdbe4f4 in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdbe4f4 in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdbe4f4 in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdbe4f4 in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

AddRef() ptr_=0x50600003af40 refcount=1 -> 2
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xdbe7d0 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::AddRef() /src/indexes/text/invasive_ptr.h:161
    #2 0xdbe7d0 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::operator=(valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings> const&) /src/indexes/text/invasive_ptr.h:77
    #3 0xdbe7d0 in operator() /src/indexes/text/text_index.cc:246
    #4 0xdbe7d0 in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdbe7d0 in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdbe7d0 in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdbe7d0 in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdbe806 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdbe806 in operator() /src/indexes/text/text_index.cc:250
    #4 0xdbe806 in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdbe806 in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdbe806 in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdbe806 in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdbe812 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdbe812 in operator() /src/indexes/text/text_index.cc:250
    #4 0xdbe812 in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdbe812 in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdbe812 in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdbe812 in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

AddRef() ptr_=0x50600003af40 refcount=2 -> 3
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xdb630b in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::AddRef() /src/indexes/text/invasive_ptr.h:161
    #2 0xdb630b in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::InvasivePtr(valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings> const&) /src/indexes/text/invasive_ptr.h:71
    #3 0xdb630b in operator() /src/indexes/text/text_index.cc:263
    #4 0xdb630b in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdb630b in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdb630b in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdb630b in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbbc4e in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:278
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdb6335 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdb6335 in operator() /src/indexes/text/text_index.cc:265
    #4 0xdb6335 in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdb6335 in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdb6335 in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdb6335 in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbbc4e in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:278
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdb633e in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdb633e in operator() /src/indexes/text/text_index.cc:265
    #4 0xdb633e in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdb633e in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdb633e in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdb633e in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbbc4e in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:278
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0x50600003af40 refcount=3 -> 2
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdbbf2f in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdbbf2f in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:283
    #4 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #5 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #6 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #7 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #8 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #9 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #10 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #11 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #12 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #13 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #14 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #15 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

AddRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xdbdb6a in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::AddRef() /src/indexes/text/invasive_ptr.h:161
    #2 0xdbdb6a in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::InvasivePtr(valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings> const&) /src/indexes/text/invasive_ptr.h:71
    #3 0xdbdb6a in operator() /src/indexes/text/text_index.cc:243
    #4 0xdbdb6a in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdbdb6a in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdbdb6a in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdbdb6a in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdbe01c in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::operator=(valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>&&) /src/indexes/text/invasive_ptr.h:98
    #3 0xdbe01c in AddKeyToPostings /src/indexes/text/text_index.cc:37
    #4 0xdbe01c in operator() /src/indexes/text/text_index.cc:243
    #5 0xdbe01c in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #6 0xdbe01c in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #7 0xdbe01c in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #8 0xdbe01c in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #9 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #10 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #11 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #12 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #13 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #14 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #15 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #16 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #17 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #18 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #19 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #20 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #21 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #22 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #23 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #24 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #25 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdbe06e in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdbe06e in AddKeyToPostings /src/indexes/text/text_index.cc:37
    #4 0xdbe06e in operator() /src/indexes/text/text_index.cc:243
    #5 0xdbe06e in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #6 0xdbe06e in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #7 0xdbe06e in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #8 0xdbe06e in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #9 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #10 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #11 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #12 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #13 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #14 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #15 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #16 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #17 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #18 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #19 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #20 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #21 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #22 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #23 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #24 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #25 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdbe4b6 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdbe4b6 in operator() /src/indexes/text/text_index.cc:243
    #4 0xdbe4b6 in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdbe4b6 in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdbe4b6 in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdbe4b6 in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdbe4f4 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::operator=(valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings> const&) /src/indexes/text/invasive_ptr.h:75
    #3 0xdbe4f4 in operator() /src/indexes/text/text_index.cc:246
    #4 0xdbe4f4 in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdbe4f4 in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdbe4f4 in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdbe4f4 in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

AddRef() ptr_=0x50600003aee0 refcount=1 -> 2
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xdbe7d0 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::AddRef() /src/indexes/text/invasive_ptr.h:161
    #2 0xdbe7d0 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::operator=(valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings> const&) /src/indexes/text/invasive_ptr.h:77
    #3 0xdbe7d0 in operator() /src/indexes/text/text_index.cc:246
    #4 0xdbe7d0 in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdbe7d0 in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdbe7d0 in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdbe7d0 in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdbe806 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdbe806 in operator() /src/indexes/text/text_index.cc:250
    #4 0xdbe806 in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdbe806 in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdbe806 in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdbe806 in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdbe812 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdbe812 in operator() /src/indexes/text/text_index.cc:250
    #4 0xdbe812 in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdbe812 in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdbe812 in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdbe812 in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

AddRef() ptr_=0x50600003aee0 refcount=2 -> 3
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xdb630b in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::AddRef() /src/indexes/text/invasive_ptr.h:161
    #2 0xdb630b in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::InvasivePtr(valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings> const&) /src/indexes/text/invasive_ptr.h:71
    #3 0xdb630b in operator() /src/indexes/text/text_index.cc:263
    #4 0xdb630b in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdb630b in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdb630b in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdb630b in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbbc4e in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:278
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdb6335 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdb6335 in operator() /src/indexes/text/text_index.cc:265
    #4 0xdb6335 in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdb6335 in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdb6335 in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdb6335 in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbbc4e in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:278
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdb633e in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdb633e in operator() /src/indexes/text/text_index.cc:265
    #4 0xdb633e in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdb633e in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdb633e in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdb633e in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbbc4e in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:278
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0x50600003aee0 refcount=3 -> 2
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdbbf2f in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdbbf2f in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:283
    #4 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #5 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #6 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #7 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #8 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #9 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #10 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #11 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #12 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #13 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #14 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #15 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

AddRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xdbdb6a in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::AddRef() /src/indexes/text/invasive_ptr.h:161
    #2 0xdbdb6a in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::InvasivePtr(valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings> const&) /src/indexes/text/invasive_ptr.h:71
    #3 0xdbdb6a in operator() /src/indexes/text/text_index.cc:243
    #4 0xdbdb6a in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdbdb6a in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdbdb6a in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdbdb6a in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdbe01c in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::operator=(valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>&&) /src/indexes/text/invasive_ptr.h:98
    #3 0xdbe01c in AddKeyToPostings /src/indexes/text/text_index.cc:37
    #4 0xdbe01c in operator() /src/indexes/text/text_index.cc:243
    #5 0xdbe01c in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #6 0xdbe01c in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #7 0xdbe01c in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #8 0xdbe01c in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #9 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #10 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #11 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #12 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #13 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #14 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #15 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #16 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #17 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #18 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #19 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #20 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #21 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #22 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #23 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #24 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #25 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdbe06e in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdbe06e in AddKeyToPostings /src/indexes/text/text_index.cc:37
    #4 0xdbe06e in operator() /src/indexes/text/text_index.cc:243
    #5 0xdbe06e in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #6 0xdbe06e in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #7 0xdbe06e in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #8 0xdbe06e in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #9 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #10 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #11 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #12 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #13 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #14 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #15 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #16 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #17 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #18 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #19 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #20 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #21 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #22 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #23 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #24 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #25 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdbe4b6 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdbe4b6 in operator() /src/indexes/text/text_index.cc:243
    #4 0xdbe4b6 in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdbe4b6 in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdbe4b6 in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdbe4b6 in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdbe4f4 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::operator=(valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings> const&) /src/indexes/text/invasive_ptr.h:75
    #3 0xdbe4f4 in operator() /src/indexes/text/text_index.cc:246
    #4 0xdbe4f4 in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdbe4f4 in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdbe4f4 in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdbe4f4 in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

AddRef() ptr_=0x50600003ae80 refcount=1 -> 2
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xdbe7d0 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::AddRef() /src/indexes/text/invasive_ptr.h:161
    #2 0xdbe7d0 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::operator=(valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings> const&) /src/indexes/text/invasive_ptr.h:77
    #3 0xdbe7d0 in operator() /src/indexes/text/text_index.cc:246
    #4 0xdbe7d0 in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdbe7d0 in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdbe7d0 in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdbe7d0 in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdbe806 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdbe806 in operator() /src/indexes/text/text_index.cc:250
    #4 0xdbe806 in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdbe806 in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdbe806 in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdbe806 in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdbe812 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdbe812 in operator() /src/indexes/text/text_index.cc:250
    #4 0xdbe812 in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdbe812 in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdbe812 in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdbe812 in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

AddRef() ptr_=0x50600003ae80 refcount=2 -> 3
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xdb630b in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::AddRef() /src/indexes/text/invasive_ptr.h:161
    #2 0xdb630b in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::InvasivePtr(valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings> const&) /src/indexes/text/invasive_ptr.h:71
    #3 0xdb630b in operator() /src/indexes/text/text_index.cc:263
    #4 0xdb630b in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdb630b in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdb630b in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdb630b in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbbc4e in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:278
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdb6335 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdb6335 in operator() /src/indexes/text/text_index.cc:265
    #4 0xdb6335 in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdb6335 in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdb6335 in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdb6335 in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbbc4e in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:278
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdb633e in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdb633e in operator() /src/indexes/text/text_index.cc:265
    #4 0xdb633e in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdb633e in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdb633e in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdb633e in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbbc4e in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:278
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0x50600003ae80 refcount=3 -> 2
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdbbf2f in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdbbf2f in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:283
    #4 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #5 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #6 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #7 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #8 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #9 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #10 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #11 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #12 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #13 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #14 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #15 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

AddRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xdbdb6a in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::AddRef() /src/indexes/text/invasive_ptr.h:161
    #2 0xdbdb6a in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::InvasivePtr(valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings> const&) /src/indexes/text/invasive_ptr.h:71
    #3 0xdbdb6a in operator() /src/indexes/text/text_index.cc:243
    #4 0xdbdb6a in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdbdb6a in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdbdb6a in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdbdb6a in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdbe01c in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::operator=(valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>&&) /src/indexes/text/invasive_ptr.h:98
    #3 0xdbe01c in AddKeyToPostings /src/indexes/text/text_index.cc:37
    #4 0xdbe01c in operator() /src/indexes/text/text_index.cc:243
    #5 0xdbe01c in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #6 0xdbe01c in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #7 0xdbe01c in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #8 0xdbe01c in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #9 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #10 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #11 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #12 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #13 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #14 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #15 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #16 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #17 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #18 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #19 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #20 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #21 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #22 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #23 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #24 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #25 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdbe06e in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdbe06e in AddKeyToPostings /src/indexes/text/text_index.cc:37
    #4 0xdbe06e in operator() /src/indexes/text/text_index.cc:243
    #5 0xdbe06e in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #6 0xdbe06e in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #7 0xdbe06e in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #8 0xdbe06e in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #9 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #10 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #11 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #12 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #13 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #14 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #15 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #16 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #17 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #18 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #19 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #20 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #21 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #22 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #23 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #24 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #25 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdbe4b6 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdbe4b6 in operator() /src/indexes/text/text_index.cc:243
    #4 0xdbe4b6 in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdbe4b6 in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdbe4b6 in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdbe4b6 in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdbe4f4 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::operator=(valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings> const&) /src/indexes/text/invasive_ptr.h:75
    #3 0xdbe4f4 in operator() /src/indexes/text/text_index.cc:246
    #4 0xdbe4f4 in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdbe4f4 in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdbe4f4 in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdbe4f4 in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

AddRef() ptr_=0x506000038c00 refcount=1 -> 2
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xdbe7d0 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::AddRef() /src/indexes/text/invasive_ptr.h:161
    #2 0xdbe7d0 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::operator=(valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings> const&) /src/indexes/text/invasive_ptr.h:77
    #3 0xdbe7d0 in operator() /src/indexes/text/text_index.cc:246
    #4 0xdbe7d0 in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdbe7d0 in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdbe7d0 in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdbe7d0 in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdbe806 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdbe806 in operator() /src/indexes/text/text_index.cc:250
    #4 0xdbe806 in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdbe806 in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdbe806 in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdbe806 in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdbe812 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdbe812 in operator() /src/indexes/text/text_index.cc:250
    #4 0xdbe812 in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdbe812 in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdbe812 in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdbe812 in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

AddRef() ptr_=0x506000038c00 refcount=2 -> 3
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xdb630b in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::AddRef() /src/indexes/text/invasive_ptr.h:161
    #2 0xdb630b in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::InvasivePtr(valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings> const&) /src/indexes/text/invasive_ptr.h:71
    #3 0xdb630b in operator() /src/indexes/text/text_index.cc:263
    #4 0xdb630b in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdb630b in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdb630b in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdb630b in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbbc4e in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:278
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdb6335 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdb6335 in operator() /src/indexes/text/text_index.cc:265
    #4 0xdb6335 in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdb6335 in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdb6335 in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdb6335 in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbbc4e in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:278
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdb633e in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdb633e in operator() /src/indexes/text/text_index.cc:265
    #4 0xdb633e in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdb633e in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdb633e in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdb633e in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbbc4e in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:278
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0x506000038c00 refcount=3 -> 2
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdbbf2f in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdbbf2f in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:283
    #4 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #5 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #6 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #7 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #8 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #9 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #10 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #11 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #12 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #13 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #14 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #15 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

AddRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xdbdb6a in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::AddRef() /src/indexes/text/invasive_ptr.h:161
    #2 0xdbdb6a in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::InvasivePtr(valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings> const&) /src/indexes/text/invasive_ptr.h:71
    #3 0xdbdb6a in operator() /src/indexes/text/text_index.cc:243
    #4 0xdbdb6a in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdbdb6a in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdbdb6a in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdbdb6a in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdbe01c in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::operator=(valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>&&) /src/indexes/text/invasive_ptr.h:98
    #3 0xdbe01c in AddKeyToPostings /src/indexes/text/text_index.cc:37
    #4 0xdbe01c in operator() /src/indexes/text/text_index.cc:243
    #5 0xdbe01c in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #6 0xdbe01c in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #7 0xdbe01c in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #8 0xdbe01c in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #9 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #10 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #11 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #12 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #13 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #14 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #15 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #16 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #17 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #18 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #19 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #20 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #21 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #22 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #23 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #24 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #25 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdbe06e in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdbe06e in AddKeyToPostings /src/indexes/text/text_index.cc:37
    #4 0xdbe06e in operator() /src/indexes/text/text_index.cc:243
    #5 0xdbe06e in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #6 0xdbe06e in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #7 0xdbe06e in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #8 0xdbe06e in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #9 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #10 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #11 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #12 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #13 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #14 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #15 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #16 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #17 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #18 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #19 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #20 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #21 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #22 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #23 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #24 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #25 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdbe4b6 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdbe4b6 in operator() /src/indexes/text/text_index.cc:243
    #4 0xdbe4b6 in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdbe4b6 in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdbe4b6 in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdbe4b6 in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdbe4f4 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::operator=(valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings> const&) /src/indexes/text/invasive_ptr.h:75
    #3 0xdbe4f4 in operator() /src/indexes/text/text_index.cc:246
    #4 0xdbe4f4 in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdbe4f4 in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdbe4f4 in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdbe4f4 in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

AddRef() ptr_=0x506000038ba0 refcount=1 -> 2
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xdbe7d0 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::AddRef() /src/indexes/text/invasive_ptr.h:161
    #2 0xdbe7d0 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::operator=(valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings> const&) /src/indexes/text/invasive_ptr.h:77
    #3 0xdbe7d0 in operator() /src/indexes/text/text_index.cc:246
    #4 0xdbe7d0 in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdbe7d0 in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdbe7d0 in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdbe7d0 in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdbe806 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdbe806 in operator() /src/indexes/text/text_index.cc:250
    #4 0xdbe806 in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdbe806 in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdbe806 in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdbe806 in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdbe812 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdbe812 in operator() /src/indexes/text/text_index.cc:250
    #4 0xdbe812 in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdbe812 in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdbe812 in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdbe812 in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

AddRef() ptr_=0x506000038ba0 refcount=2 -> 3
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xdb630b in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::AddRef() /src/indexes/text/invasive_ptr.h:161
    #2 0xdb630b in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::InvasivePtr(valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings> const&) /src/indexes/text/invasive_ptr.h:71
    #3 0xdb630b in operator() /src/indexes/text/text_index.cc:263
    #4 0xdb630b in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdb630b in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdb630b in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdb630b in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbbc4e in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:278
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdb6335 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdb6335 in operator() /src/indexes/text/text_index.cc:265
    #4 0xdb6335 in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdb6335 in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdb6335 in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdb6335 in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbbc4e in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:278
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdb633e in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdb633e in operator() /src/indexes/text/text_index.cc:265
    #4 0xdb633e in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdb633e in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdb633e in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdb633e in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbbc4e in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:278
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0x506000038ba0 refcount=3 -> 2
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdbbf2f in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdbbf2f in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:283
    #4 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #5 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #6 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #7 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #8 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #9 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #10 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #11 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #12 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #13 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #14 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #15 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

AddRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xdbdb6a in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::AddRef() /src/indexes/text/invasive_ptr.h:161
    #2 0xdbdb6a in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::InvasivePtr(valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings> const&) /src/indexes/text/invasive_ptr.h:71
    #3 0xdbdb6a in operator() /src/indexes/text/text_index.cc:243
    #4 0xdbdb6a in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdbdb6a in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdbdb6a in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdbdb6a in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdbe01c in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::operator=(valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>&&) /src/indexes/text/invasive_ptr.h:98
    #3 0xdbe01c in AddKeyToPostings /src/indexes/text/text_index.cc:37
    #4 0xdbe01c in operator() /src/indexes/text/text_index.cc:243
    #5 0xdbe01c in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #6 0xdbe01c in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #7 0xdbe01c in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #8 0xdbe01c in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #9 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #10 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #11 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #12 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #13 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #14 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #15 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #16 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #17 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #18 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #19 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #20 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #21 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #22 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #23 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #24 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #25 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdbe06e in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdbe06e in AddKeyToPostings /src/indexes/text/text_index.cc:37
    #4 0xdbe06e in operator() /src/indexes/text/text_index.cc:243
    #5 0xdbe06e in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #6 0xdbe06e in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #7 0xdbe06e in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #8 0xdbe06e in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #9 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #10 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #11 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #12 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #13 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #14 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #15 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #16 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #17 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #18 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #19 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #20 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #21 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #22 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #23 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #24 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #25 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdbe4b6 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdbe4b6 in operator() /src/indexes/text/text_index.cc:243
    #4 0xdbe4b6 in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdbe4b6 in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdbe4b6 in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdbe4b6 in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdbe4f4 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::operator=(valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings> const&) /src/indexes/text/invasive_ptr.h:75
    #3 0xdbe4f4 in operator() /src/indexes/text/text_index.cc:246
    #4 0xdbe4f4 in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdbe4f4 in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdbe4f4 in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdbe4f4 in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

AddRef() ptr_=0x506000038120 refcount=1 -> 2
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xdbe7d0 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::AddRef() /src/indexes/text/invasive_ptr.h:161
    #2 0xdbe7d0 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::operator=(valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings> const&) /src/indexes/text/invasive_ptr.h:77
    #3 0xdbe7d0 in operator() /src/indexes/text/text_index.cc:246
    #4 0xdbe7d0 in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdbe7d0 in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdbe7d0 in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdbe7d0 in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdbe806 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdbe806 in operator() /src/indexes/text/text_index.cc:250
    #4 0xdbe806 in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdbe806 in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdbe806 in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdbe806 in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdbe812 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdbe812 in operator() /src/indexes/text/text_index.cc:250
    #4 0xdbe812 in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdbe812 in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdbe812 in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdbe812 in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

AddRef() ptr_=0x506000038120 refcount=2 -> 3
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xdb630b in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::AddRef() /src/indexes/text/invasive_ptr.h:161
    #2 0xdb630b in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::InvasivePtr(valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings> const&) /src/indexes/text/invasive_ptr.h:71
    #3 0xdb630b in operator() /src/indexes/text/text_index.cc:263
    #4 0xdb630b in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdb630b in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdb630b in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdb630b in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbbc4e in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:278
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdb6335 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdb6335 in operator() /src/indexes/text/text_index.cc:265
    #4 0xdb6335 in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdb6335 in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdb6335 in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdb6335 in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbbc4e in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:278
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdb633e in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdb633e in operator() /src/indexes/text/text_index.cc:265
    #4 0xdb633e in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdb633e in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdb633e in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdb633e in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbbc4e in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:278
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0x506000038120 refcount=3 -> 2
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdbbf2f in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdbbf2f in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:283
    #4 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #5 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #6 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #7 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #8 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #9 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #10 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #11 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #12 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #13 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #14 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #15 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

AddRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xdbdb6a in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::AddRef() /src/indexes/text/invasive_ptr.h:161
    #2 0xdbdb6a in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::InvasivePtr(valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings> const&) /src/indexes/text/invasive_ptr.h:71
    #3 0xdbdb6a in operator() /src/indexes/text/text_index.cc:243
    #4 0xdbdb6a in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdbdb6a in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdbdb6a in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdbdb6a in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdbe01c in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::operator=(valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>&&) /src/indexes/text/invasive_ptr.h:98
    #3 0xdbe01c in AddKeyToPostings /src/indexes/text/text_index.cc:37
    #4 0xdbe01c in operator() /src/indexes/text/text_index.cc:243
    #5 0xdbe01c in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #6 0xdbe01c in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #7 0xdbe01c in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #8 0xdbe01c in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #9 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #10 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #11 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #12 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #13 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #14 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #15 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #16 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #17 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #18 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #19 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #20 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #21 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #22 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #23 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #24 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #25 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdbe06e in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdbe06e in AddKeyToPostings /src/indexes/text/text_index.cc:37
    #4 0xdbe06e in operator() /src/indexes/text/text_index.cc:243
    #5 0xdbe06e in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #6 0xdbe06e in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #7 0xdbe06e in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #8 0xdbe06e in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #9 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #10 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #11 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #12 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #13 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #14 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #15 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #16 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #17 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #18 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #19 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #20 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #21 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #22 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #23 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #24 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #25 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdbe4b6 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdbe4b6 in operator() /src/indexes/text/text_index.cc:243
    #4 0xdbe4b6 in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdbe4b6 in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdbe4b6 in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdbe4b6 in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdbe4f4 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::operator=(valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings> const&) /src/indexes/text/invasive_ptr.h:75
    #3 0xdbe4f4 in operator() /src/indexes/text/text_index.cc:246
    #4 0xdbe4f4 in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdbe4f4 in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdbe4f4 in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdbe4f4 in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

AddRef() ptr_=0x506000038060 refcount=1 -> 2
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xdbe7d0 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::AddRef() /src/indexes/text/invasive_ptr.h:161
    #2 0xdbe7d0 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::operator=(valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings> const&) /src/indexes/text/invasive_ptr.h:77
    #3 0xdbe7d0 in operator() /src/indexes/text/text_index.cc:246
    #4 0xdbe7d0 in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdbe7d0 in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdbe7d0 in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdbe7d0 in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdbe806 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdbe806 in operator() /src/indexes/text/text_index.cc:250
    #4 0xdbe806 in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdbe806 in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdbe806 in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdbe806 in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdbe812 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdbe812 in operator() /src/indexes/text/text_index.cc:250
    #4 0xdbe812 in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdbe812 in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdbe812 in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdbe812 in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

AddRef() ptr_=0x506000038060 refcount=2 -> 3
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xdb630b in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::AddRef() /src/indexes/text/invasive_ptr.h:161
    #2 0xdb630b in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::InvasivePtr(valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings> const&) /src/indexes/text/invasive_ptr.h:71
    #3 0xdb630b in operator() /src/indexes/text/text_index.cc:263
    #4 0xdb630b in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdb630b in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdb630b in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdb630b in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbbc4e in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:278
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdb6335 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdb6335 in operator() /src/indexes/text/text_index.cc:265
    #4 0xdb6335 in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdb6335 in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdb6335 in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdb6335 in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbbc4e in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:278
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdb633e in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdb633e in operator() /src/indexes/text/text_index.cc:265
    #4 0xdb633e in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdb633e in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdb633e in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdb633e in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbbc4e in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:278
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0x506000038060 refcount=3 -> 2
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdbbf2f in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdbbf2f in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:283
    #4 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #5 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #6 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #7 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #8 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #9 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #10 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #11 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #12 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #13 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #14 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #15 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

AddRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xdbdb6a in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::AddRef() /src/indexes/text/invasive_ptr.h:161
    #2 0xdbdb6a in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::InvasivePtr(valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings> const&) /src/indexes/text/invasive_ptr.h:71
    #3 0xdbdb6a in operator() /src/indexes/text/text_index.cc:243
    #4 0xdbdb6a in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdbdb6a in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdbdb6a in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdbdb6a in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdbe01c in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::operator=(valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>&&) /src/indexes/text/invasive_ptr.h:98
    #3 0xdbe01c in AddKeyToPostings /src/indexes/text/text_index.cc:37
    #4 0xdbe01c in operator() /src/indexes/text/text_index.cc:243
    #5 0xdbe01c in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #6 0xdbe01c in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #7 0xdbe01c in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #8 0xdbe01c in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #9 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #10 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #11 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #12 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #13 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #14 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #15 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #16 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #17 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #18 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #19 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #20 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #21 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #22 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #23 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #24 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #25 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdbe06e in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdbe06e in AddKeyToPostings /src/indexes/text/text_index.cc:37
    #4 0xdbe06e in operator() /src/indexes/text/text_index.cc:243
    #5 0xdbe06e in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #6 0xdbe06e in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #7 0xdbe06e in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #8 0xdbe06e in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #9 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #10 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #11 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #12 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #13 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #14 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #15 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #16 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #17 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #18 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #19 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #20 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #21 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #22 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #23 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #24 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #25 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdbe4b6 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdbe4b6 in operator() /src/indexes/text/text_index.cc:243
    #4 0xdbe4b6 in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdbe4b6 in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdbe4b6 in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdbe4b6 in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdbe4f4 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::operator=(valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings> const&) /src/indexes/text/invasive_ptr.h:75
    #3 0xdbe4f4 in operator() /src/indexes/text/text_index.cc:246
    #4 0xdbe4f4 in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdbe4f4 in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdbe4f4 in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdbe4f4 in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

AddRef() ptr_=0x506000033c80 refcount=1 -> 2
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xdbe7d0 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::AddRef() /src/indexes/text/invasive_ptr.h:161
    #2 0xdbe7d0 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::operator=(valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings> const&) /src/indexes/text/invasive_ptr.h:77
    #3 0xdbe7d0 in operator() /src/indexes/text/text_index.cc:246
    #4 0xdbe7d0 in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdbe7d0 in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdbe7d0 in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdbe7d0 in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdbe806 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdbe806 in operator() /src/indexes/text/text_index.cc:250
    #4 0xdbe806 in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdbe806 in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdbe806 in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdbe806 in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdbe812 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdbe812 in operator() /src/indexes/text/text_index.cc:250
    #4 0xdbe812 in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdbe812 in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdbe812 in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdbe812 in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

AddRef() ptr_=0x506000033c80 refcount=2 -> 3
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xdb630b in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::AddRef() /src/indexes/text/invasive_ptr.h:161
    #2 0xdb630b in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::InvasivePtr(valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings> const&) /src/indexes/text/invasive_ptr.h:71
    #3 0xdb630b in operator() /src/indexes/text/text_index.cc:263
    #4 0xdb630b in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdb630b in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdb630b in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdb630b in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbbc4e in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:278
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdb6335 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdb6335 in operator() /src/indexes/text/text_index.cc:265
    #4 0xdb6335 in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdb6335 in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdb6335 in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdb6335 in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbbc4e in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:278
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdb633e in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdb633e in operator() /src/indexes/text/text_index.cc:265
    #4 0xdb633e in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdb633e in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdb633e in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdb633e in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbbc4e in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:278
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #17 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #18 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #19 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #20 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #21 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #22 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #23 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #24 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0x506000033c80 refcount=3 -> 2
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdbbf2f in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdbbf2f in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:283
    #4 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #5 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #6 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #7 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #8 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #9 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #10 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #11 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #12 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #13 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #14 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #15 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

AddRef() ptr_=0x506000033c80 refcount=2 -> 3
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xe0c17d in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::AddRef() /src/indexes/text/invasive_ptr.h:161
    #2 0xe0c17d in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::CopyRaw(valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::RefCountWrapper*) /src/indexes/text/invasive_ptr.h:64
    #3 0xe0c17d in valkey_search::indexes::text::Rax::WordIterator::GetPostingsTarget() const /src/indexes/text/rax_wrapper.cc:223
    #4 0xd1734d in valkey_search::indexes::TextTest::GetPostingsForToken(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:96
    #5 0xd0d19e in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:330
    #6 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #7 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #8 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #9 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #10 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #11 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #12 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #13 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #14 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xe0c1bf in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xe0c1bf in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::CopyRaw(valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::RefCountWrapper*) /src/indexes/text/invasive_ptr.h:66
    #4 0xe0c1bf in valkey_search::indexes::text::Rax::WordIterator::GetPostingsTarget() const /src/indexes/text/rax_wrapper.cc:223
    #5 0xd1734d in valkey_search::indexes::TextTest::GetPostingsForToken(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:96
    #6 0xd0d19e in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:330
    #7 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #8 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #9 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #10 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #11 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #12 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #13 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #14 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #15 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xd2bdc7 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xd2bdc7 in testing::AssertionResult testing::internal::CmpHelperNE<valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>, decltype(nullptr)>(char const*, char const*, valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings> const&, decltype(nullptr) const&) /.build-release-asan/.deps/install/include/gtest/gtest.h:1472
    #4 0xd0d285 in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:331
    #5 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #6 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #7 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #8 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #9 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #10 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #11 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #12 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #13 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0x506000033c80 refcount=3 -> 2
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xd0d9ff in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xd0d9ff in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:336
    #4 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #5 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #6 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #7 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #8 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #9 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #10 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #11 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #12 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

AddRef() ptr_=0x50600003af40 refcount=2 -> 3
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xe0c17d in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::AddRef() /src/indexes/text/invasive_ptr.h:161
    #2 0xe0c17d in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::CopyRaw(valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::RefCountWrapper*) /src/indexes/text/invasive_ptr.h:64
    #3 0xe0c17d in valkey_search::indexes::text::Rax::WordIterator::GetPostingsTarget() const /src/indexes/text/rax_wrapper.cc:223
    #4 0xd1734d in valkey_search::indexes::TextTest::GetPostingsForToken(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:96
    #5 0xd0d19e in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:330
    #6 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #7 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #8 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #9 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #10 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #11 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #12 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #13 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #14 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xe0c1bf in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xe0c1bf in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::CopyRaw(valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::RefCountWrapper*) /src/indexes/text/invasive_ptr.h:66
    #4 0xe0c1bf in valkey_search::indexes::text::Rax::WordIterator::GetPostingsTarget() const /src/indexes/text/rax_wrapper.cc:223
    #5 0xd1734d in valkey_search::indexes::TextTest::GetPostingsForToken(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:96
    #6 0xd0d19e in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:330
    #7 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #8 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #9 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #10 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #11 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #12 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #13 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #14 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #15 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xd2bdc7 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xd2bdc7 in testing::AssertionResult testing::internal::CmpHelperNE<valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>, decltype(nullptr)>(char const*, char const*, valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings> const&, decltype(nullptr) const&) /.build-release-asan/.deps/install/include/gtest/gtest.h:1472
    #4 0xd0d285 in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:331
    #5 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #6 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #7 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #8 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #9 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #10 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #11 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #12 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #13 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0x50600003af40 refcount=3 -> 2
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xd0d9ff in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xd0d9ff in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:336
    #4 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #5 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #6 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #7 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #8 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #9 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #10 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #11 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #12 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

AddRef() ptr_=0x506000038ba0 refcount=2 -> 3
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xe0c17d in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::AddRef() /src/indexes/text/invasive_ptr.h:161
    #2 0xe0c17d in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::CopyRaw(valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::RefCountWrapper*) /src/indexes/text/invasive_ptr.h:64
    #3 0xe0c17d in valkey_search::indexes::text::Rax::WordIterator::GetPostingsTarget() const /src/indexes/text/rax_wrapper.cc:223
    #4 0xd1734d in valkey_search::indexes::TextTest::GetPostingsForToken(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:96
    #5 0xd0d19e in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:330
    #6 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #7 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #8 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #9 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #10 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #11 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #12 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #13 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #14 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xe0c1bf in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xe0c1bf in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::CopyRaw(valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::RefCountWrapper*) /src/indexes/text/invasive_ptr.h:66
    #4 0xe0c1bf in valkey_search::indexes::text::Rax::WordIterator::GetPostingsTarget() const /src/indexes/text/rax_wrapper.cc:223
    #5 0xd1734d in valkey_search::indexes::TextTest::GetPostingsForToken(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:96
    #6 0xd0d19e in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:330
    #7 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #8 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #9 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #10 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #11 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #12 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #13 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #14 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #15 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xd2bdc7 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xd2bdc7 in testing::AssertionResult testing::internal::CmpHelperNE<valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>, decltype(nullptr)>(char const*, char const*, valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings> const&, decltype(nullptr) const&) /.build-release-asan/.deps/install/include/gtest/gtest.h:1472
    #4 0xd0d285 in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:331
    #5 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #6 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #7 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #8 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #9 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #10 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #11 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #12 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #13 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0x506000038ba0 refcount=3 -> 2
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xd0d9ff in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xd0d9ff in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:336
    #4 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #5 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #6 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #7 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #8 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #9 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #10 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #11 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #12 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

AddRef() ptr_=0x50600003ae80 refcount=2 -> 3
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xe0c17d in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::AddRef() /src/indexes/text/invasive_ptr.h:161
    #2 0xe0c17d in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::CopyRaw(valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::RefCountWrapper*) /src/indexes/text/invasive_ptr.h:64
    #3 0xe0c17d in valkey_search::indexes::text::Rax::WordIterator::GetPostingsTarget() const /src/indexes/text/rax_wrapper.cc:223
    #4 0xd1734d in valkey_search::indexes::TextTest::GetPostingsForToken(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:96
    #5 0xd0d19e in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:330
    #6 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #7 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #8 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #9 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #10 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #11 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #12 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #13 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #14 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xe0c1bf in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xe0c1bf in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::CopyRaw(valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::RefCountWrapper*) /src/indexes/text/invasive_ptr.h:66
    #4 0xe0c1bf in valkey_search::indexes::text::Rax::WordIterator::GetPostingsTarget() const /src/indexes/text/rax_wrapper.cc:223
    #5 0xd1734d in valkey_search::indexes::TextTest::GetPostingsForToken(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:96
    #6 0xd0d19e in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:330
    #7 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #8 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #9 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #10 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #11 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #12 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #13 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #14 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #15 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xd2bdc7 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xd2bdc7 in testing::AssertionResult testing::internal::CmpHelperNE<valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>, decltype(nullptr)>(char const*, char const*, valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings> const&, decltype(nullptr) const&) /.build-release-asan/.deps/install/include/gtest/gtest.h:1472
    #4 0xd0d285 in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:331
    #5 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #6 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #7 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #8 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #9 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #10 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #11 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #12 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #13 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0x50600003ae80 refcount=3 -> 2
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xd0d9ff in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xd0d9ff in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:336
    #4 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #5 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #6 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #7 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #8 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #9 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #10 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #11 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #12 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

AddRef() ptr_=0x50600003afa0 refcount=2 -> 3
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xe0c17d in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::AddRef() /src/indexes/text/invasive_ptr.h:161
    #2 0xe0c17d in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::CopyRaw(valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::RefCountWrapper*) /src/indexes/text/invasive_ptr.h:64
    #3 0xe0c17d in valkey_search::indexes::text::Rax::WordIterator::GetPostingsTarget() const /src/indexes/text/rax_wrapper.cc:223
    #4 0xd1734d in valkey_search::indexes::TextTest::GetPostingsForToken(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:96
    #5 0xd0d19e in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:330
    #6 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #7 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #8 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #9 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #10 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #11 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #12 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #13 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #14 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xe0c1bf in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xe0c1bf in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::CopyRaw(valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::RefCountWrapper*) /src/indexes/text/invasive_ptr.h:66
    #4 0xe0c1bf in valkey_search::indexes::text::Rax::WordIterator::GetPostingsTarget() const /src/indexes/text/rax_wrapper.cc:223
    #5 0xd1734d in valkey_search::indexes::TextTest::GetPostingsForToken(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:96
    #6 0xd0d19e in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:330
    #7 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #8 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #9 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #10 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #11 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #12 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #13 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #14 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #15 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xd2bdc7 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xd2bdc7 in testing::AssertionResult testing::internal::CmpHelperNE<valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>, decltype(nullptr)>(char const*, char const*, valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings> const&, decltype(nullptr) const&) /.build-release-asan/.deps/install/include/gtest/gtest.h:1472
    #4 0xd0d285 in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:331
    #5 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #6 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #7 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #8 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #9 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #10 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #11 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #12 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #13 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0x50600003afa0 refcount=3 -> 2
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xd0d9ff in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xd0d9ff in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:336
    #4 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #5 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #6 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #7 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #8 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #9 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #10 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #11 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #12 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

AddRef() ptr_=0x50600003aee0 refcount=2 -> 3
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xe0c17d in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::AddRef() /src/indexes/text/invasive_ptr.h:161
    #2 0xe0c17d in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::CopyRaw(valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::RefCountWrapper*) /src/indexes/text/invasive_ptr.h:64
    #3 0xe0c17d in valkey_search::indexes::text::Rax::WordIterator::GetPostingsTarget() const /src/indexes/text/rax_wrapper.cc:223
    #4 0xd1734d in valkey_search::indexes::TextTest::GetPostingsForToken(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:96
    #5 0xd0d19e in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:330
    #6 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #7 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #8 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #9 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #10 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #11 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #12 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #13 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #14 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xe0c1bf in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xe0c1bf in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::CopyRaw(valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::RefCountWrapper*) /src/indexes/text/invasive_ptr.h:66
    #4 0xe0c1bf in valkey_search::indexes::text::Rax::WordIterator::GetPostingsTarget() const /src/indexes/text/rax_wrapper.cc:223
    #5 0xd1734d in valkey_search::indexes::TextTest::GetPostingsForToken(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:96
    #6 0xd0d19e in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:330
    #7 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #8 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #9 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #10 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #11 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #12 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #13 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #14 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #15 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xd2bdc7 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xd2bdc7 in testing::AssertionResult testing::internal::CmpHelperNE<valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>, decltype(nullptr)>(char const*, char const*, valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings> const&, decltype(nullptr) const&) /.build-release-asan/.deps/install/include/gtest/gtest.h:1472
    #4 0xd0d285 in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:331
    #5 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #6 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #7 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #8 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #9 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #10 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #11 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #12 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #13 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0x50600003aee0 refcount=3 -> 2
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xd0d9ff in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xd0d9ff in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:336
    #4 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #5 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #6 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #7 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #8 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #9 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #10 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #11 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #12 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

AddRef() ptr_=0x506000038060 refcount=2 -> 3
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xe0c17d in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::AddRef() /src/indexes/text/invasive_ptr.h:161
    #2 0xe0c17d in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::CopyRaw(valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::RefCountWrapper*) /src/indexes/text/invasive_ptr.h:64
    #3 0xe0c17d in valkey_search::indexes::text::Rax::WordIterator::GetPostingsTarget() const /src/indexes/text/rax_wrapper.cc:223
    #4 0xd1734d in valkey_search::indexes::TextTest::GetPostingsForToken(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:96
    #5 0xd0d19e in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:330
    #6 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #7 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #8 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #9 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #10 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #11 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #12 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #13 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #14 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xe0c1bf in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xe0c1bf in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::CopyRaw(valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::RefCountWrapper*) /src/indexes/text/invasive_ptr.h:66
    #4 0xe0c1bf in valkey_search::indexes::text::Rax::WordIterator::GetPostingsTarget() const /src/indexes/text/rax_wrapper.cc:223
    #5 0xd1734d in valkey_search::indexes::TextTest::GetPostingsForToken(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:96
    #6 0xd0d19e in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:330
    #7 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #8 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #9 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #10 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #11 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #12 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #13 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #14 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #15 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xd2bdc7 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xd2bdc7 in testing::AssertionResult testing::internal::CmpHelperNE<valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>, decltype(nullptr)>(char const*, char const*, valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings> const&, decltype(nullptr) const&) /.build-release-asan/.deps/install/include/gtest/gtest.h:1472
    #4 0xd0d285 in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:331
    #5 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #6 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #7 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #8 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #9 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #10 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #11 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #12 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #13 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0x506000038060 refcount=3 -> 2
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xd0d9ff in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xd0d9ff in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:336
    #4 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #5 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #6 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #7 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #8 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #9 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #10 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #11 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #12 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

AddRef() ptr_=0x50600003b060 refcount=2 -> 3
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xe0c17d in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::AddRef() /src/indexes/text/invasive_ptr.h:161
    #2 0xe0c17d in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::CopyRaw(valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::RefCountWrapper*) /src/indexes/text/invasive_ptr.h:64
    #3 0xe0c17d in valkey_search::indexes::text::Rax::WordIterator::GetPostingsTarget() const /src/indexes/text/rax_wrapper.cc:223
    #4 0xd1734d in valkey_search::indexes::TextTest::GetPostingsForToken(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:96
    #5 0xd0d19e in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:330
    #6 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #7 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #8 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #9 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #10 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #11 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #12 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #13 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #14 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xe0c1bf in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xe0c1bf in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::CopyRaw(valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::RefCountWrapper*) /src/indexes/text/invasive_ptr.h:66
    #4 0xe0c1bf in valkey_search::indexes::text::Rax::WordIterator::GetPostingsTarget() const /src/indexes/text/rax_wrapper.cc:223
    #5 0xd1734d in valkey_search::indexes::TextTest::GetPostingsForToken(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:96
    #6 0xd0d19e in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:330
    #7 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #8 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #9 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #10 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #11 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #12 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #13 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #14 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #15 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xd2bdc7 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xd2bdc7 in testing::AssertionResult testing::internal::CmpHelperNE<valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>, decltype(nullptr)>(char const*, char const*, valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings> const&, decltype(nullptr) const&) /.build-release-asan/.deps/install/include/gtest/gtest.h:1472
    #4 0xd0d285 in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:331
    #5 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #6 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #7 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #8 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #9 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #10 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #11 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #12 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #13 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0x50600003b060 refcount=3 -> 2
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xd0d9ff in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xd0d9ff in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:336
    #4 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #5 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #6 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #7 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #8 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #9 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #10 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #11 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #12 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

AddRef() ptr_=0x506000038120 refcount=2 -> 3
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xe0c17d in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::AddRef() /src/indexes/text/invasive_ptr.h:161
    #2 0xe0c17d in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::CopyRaw(valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::RefCountWrapper*) /src/indexes/text/invasive_ptr.h:64
    #3 0xe0c17d in valkey_search::indexes::text::Rax::WordIterator::GetPostingsTarget() const /src/indexes/text/rax_wrapper.cc:223
    #4 0xd1734d in valkey_search::indexes::TextTest::GetPostingsForToken(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:96
    #5 0xd0d19e in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:330
    #6 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #7 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #8 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #9 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #10 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #11 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #12 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #13 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #14 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xe0c1bf in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xe0c1bf in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::CopyRaw(valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::RefCountWrapper*) /src/indexes/text/invasive_ptr.h:66
    #4 0xe0c1bf in valkey_search::indexes::text::Rax::WordIterator::GetPostingsTarget() const /src/indexes/text/rax_wrapper.cc:223
    #5 0xd1734d in valkey_search::indexes::TextTest::GetPostingsForToken(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:96
    #6 0xd0d19e in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:330
    #7 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #8 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #9 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #10 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #11 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #12 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #13 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #14 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #15 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xd2bdc7 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xd2bdc7 in testing::AssertionResult testing::internal::CmpHelperNE<valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>, decltype(nullptr)>(char const*, char const*, valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings> const&, decltype(nullptr) const&) /.build-release-asan/.deps/install/include/gtest/gtest.h:1472
    #4 0xd0d285 in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:331
    #5 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #6 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #7 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #8 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #9 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #10 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #11 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #12 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #13 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0x506000038120 refcount=3 -> 2
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xd0d9ff in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xd0d9ff in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:336
    #4 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #5 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #6 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #7 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #8 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #9 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #10 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #11 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #12 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

AddRef() ptr_=0x506000038c00 refcount=2 -> 3
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xe0c17d in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::AddRef() /src/indexes/text/invasive_ptr.h:161
    #2 0xe0c17d in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::CopyRaw(valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::RefCountWrapper*) /src/indexes/text/invasive_ptr.h:64
    #3 0xe0c17d in valkey_search::indexes::text::Rax::WordIterator::GetPostingsTarget() const /src/indexes/text/rax_wrapper.cc:223
    #4 0xd1734d in valkey_search::indexes::TextTest::GetPostingsForToken(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:96
    #5 0xd0d19e in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:330
    #6 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #7 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #8 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #9 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #10 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #11 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #12 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #13 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #14 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xe0c1bf in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xe0c1bf in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::CopyRaw(valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::RefCountWrapper*) /src/indexes/text/invasive_ptr.h:66
    #4 0xe0c1bf in valkey_search::indexes::text::Rax::WordIterator::GetPostingsTarget() const /src/indexes/text/rax_wrapper.cc:223
    #5 0xd1734d in valkey_search::indexes::TextTest::GetPostingsForToken(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:96
    #6 0xd0d19e in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:330
    #7 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #8 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #9 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #10 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #11 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #12 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #13 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #14 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #15 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xd2bdc7 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xd2bdc7 in testing::AssertionResult testing::internal::CmpHelperNE<valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>, decltype(nullptr)>(char const*, char const*, valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings> const&, decltype(nullptr) const&) /.build-release-asan/.deps/install/include/gtest/gtest.h:1472
    #4 0xd0d285 in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:331
    #5 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #6 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #7 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #8 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #9 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #10 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #11 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #12 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #13 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

ReleaseRef() ptr_=0x506000038c00 refcount=3 -> 2
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xd0d9ff in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xd0d9ff in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:336
    #4 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #5 0x153f402 in testing::Test::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f402)
    #6 0x153f9ee in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f9ee)
    #7 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #8 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #9 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #10 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #11 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #12 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

PREFIX TREE - word: 'word0' ptr: 0x506000033c80 refcount: 2
ReleaseRef() ptr_=0x506000033c80 refcount=2 -> 1
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdb4b63 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdb4b63 in valkey_search::indexes::text::TextIndex::~TextIndex() /src/indexes/text/text_index.cc:106
    #4 0xc18fbd in std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>::~pair() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/stl_pair.h:284
    #5 0xc18fbd in void std::destroy_at<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> >(std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>*) /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/stl_construct.h:88
    #6 0xc18fbd in void std::allocator_traits<std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >::destroy<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> >(std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> >&, std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>*) /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/alloc_traits.h:556
    #7 0xc18fbd in void absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex>::delete_element<std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >(std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> >*, std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>*) /.build-release-asan/.deps/install/include/absl/container/node_hash_map.h:623
    #8 0xc18fbd in void absl::lts_20240722::container_internal::node_slot_policy<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>&, absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex> >::destroy<std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >(std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> >*, std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>**) /.build-release-asan/.deps/install/include/absl/container/internal/node_slot_policy.h:62
    #9 0xc18fbd in auto absl::lts_20240722::container_internal::common_policy_traits<absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex>, void>::destroy<std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >(std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> >*, std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>**) /.build-release-asan/.deps/install/include/absl/container/internal/common_policy_traits.h:51
    #10 0xc18fbd in absl::lts_20240722::container_internal::raw_hash_set<absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex>, absl::lts_20240722::hash_internal::Hash<valkey_search::InternedStringPtr>, std::equal_to<valkey_search::InternedStringPtr>, std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >::destroy(std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>**) /.build-release-asan/.deps/install/include/absl/container/internal/raw_hash_set.h:3485
    #11 0xc18fbd in absl::lts_20240722::container_internal::raw_hash_set<absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex>, absl::lts_20240722::hash_internal::Hash<valkey_search::InternedStringPtr>, std::equal_to<valkey_search::InternedStringPtr>, std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >::destructor_impl() /.build-release-asan/.deps/install/include/absl/container/internal/raw_hash_set.h:3554
    #12 0xc18fbd in absl::lts_20240722::container_internal::raw_hash_set<absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex>, absl::lts_20240722::hash_internal::Hash<valkey_search::InternedStringPtr>, std::equal_to<valkey_search::InternedStringPtr>, std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >::~raw_hash_set() /.build-release-asan/.deps/install/include/absl/container/internal/raw_hash_set.h:2838
    #13 0xc18fbd in absl::lts_20240722::container_internal::raw_hash_map<absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex>, absl::lts_20240722::hash_internal::Hash<valkey_search::InternedStringPtr>, std::equal_to<valkey_search::InternedStringPtr>, std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >::~raw_hash_map() /.build-release-asan/.deps/install/include/absl/container/internal/raw_hash_map.h:33
    #14 0xc18fbd in absl::lts_20240722::node_hash_map<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex, absl::lts_20240722::hash_internal::Hash<valkey_search::InternedStringPtr>, std::equal_to<valkey_search::InternedStringPtr>, std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >::~node_hash_map() /.build-release-asan/.deps/install/include/absl/container/node_hash_map.h:123
    #15 0xc18fbd in valkey_search::indexes::text::TextIndexSchema::~TextIndexSchema() /src/indexes/text/text_index.h:89
    #16 0xc18fbd in void std::destroy_at<valkey_search::indexes::text::TextIndexSchema>(valkey_search::indexes::text::TextIndexSchema*) /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/stl_construct.h:88
    #17 0xc18fbd in void std::_Destroy<valkey_search::indexes::text::TextIndexSchema>(valkey_search::indexes::text::TextIndexSchema*) /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/stl_construct.h:149
    #18 0xc18fbd in void std::allocator_traits<std::allocator<void> >::destroy<valkey_search::indexes::text::TextIndexSchema>(std::allocator<void>&, valkey_search::indexes::text::TextIndexSchema*) /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/alloc_traits.h:671
    #19 0xc18fbd in std::_Sp_counted_ptr_inplace<valkey_search::indexes::text::TextIndexSchema, std::allocator<void>, (__gnu_cxx::_Lock_policy)2>::_M_dispose() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/shared_ptr_base.h:616
    #20 0x76e355 in std::_Sp_counted_base<(__gnu_cxx::_Lock_policy)2>::_M_release() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/shared_ptr_base.h:346
    #21 0xd37753 in std::__shared_count<(__gnu_cxx::_Lock_policy)2>::~__shared_count() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/shared_ptr_base.h:1069
    #22 0xd37753 in std::__shared_ptr<valkey_search::indexes::text::TextIndexSchema, (__gnu_cxx::_Lock_policy)2>::~__shared_ptr() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/shared_ptr_base.h:1525
    #23 0xd37753 in std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>::~shared_ptr() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/shared_ptr.h:175
    #24 0xd37753 in valkey_search::indexes::TextTest::~TextTest() /testing/text_test.cc:42
    #25 0xd37753 in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::~TextTest_LargeDocumentTokenization_Test() /testing/text_test.cc:314
    #26 0xd37753 in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::~TextTest_LargeDocumentTokenization_Test() /testing/text_test.cc:314
    #27 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #28 0x153f75b in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f75b)
    #29 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #30 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #31 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #32 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #33 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #34 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

PREFIX TREE - word: 'word0' ptr: 0x506000033c80 refcount: 1
ReleaseRef() ptr_=0x506000033c80 refcount=1 -> 0 [DELETING]
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdb4b63 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdb4b63 in valkey_search::indexes::text::TextIndex::~TextIndex() /src/indexes/text/text_index.cc:106
    #4 0xc18fbd in std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>::~pair() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/stl_pair.h:284
    #5 0xc18fbd in void std::destroy_at<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> >(std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>*) /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/stl_construct.h:88
    #6 0xc18fbd in void std::allocator_traits<std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >::destroy<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> >(std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> >&, std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>*) /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/alloc_traits.h:556
    #7 0xc18fbd in void absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex>::delete_element<std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >(std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> >*, std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>*) /.build-release-asan/.deps/install/include/absl/container/node_hash_map.h:623
    #8 0xc18fbd in void absl::lts_20240722::container_internal::node_slot_policy<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>&, absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex> >::destroy<std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >(std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> >*, std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>**) /.build-release-asan/.deps/install/include/absl/container/internal/node_slot_policy.h:62
    #9 0xc18fbd in auto absl::lts_20240722::container_internal::common_policy_traits<absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex>, void>::destroy<std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >(std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> >*, std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>**) /.build-release-asan/.deps/install/include/absl/container/internal/common_policy_traits.h:51
    #10 0xc18fbd in absl::lts_20240722::container_internal::raw_hash_set<absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex>, absl::lts_20240722::hash_internal::Hash<valkey_search::InternedStringPtr>, std::equal_to<valkey_search::InternedStringPtr>, std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >::destroy(std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>**) /.build-release-asan/.deps/install/include/absl/container/internal/raw_hash_set.h:3485
    #11 0xc18fbd in absl::lts_20240722::container_internal::raw_hash_set<absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex>, absl::lts_20240722::hash_internal::Hash<valkey_search::InternedStringPtr>, std::equal_to<valkey_search::InternedStringPtr>, std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >::destructor_impl() /.build-release-asan/.deps/install/include/absl/container/internal/raw_hash_set.h:3554
    #12 0xc18fbd in absl::lts_20240722::container_internal::raw_hash_set<absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex>, absl::lts_20240722::hash_internal::Hash<valkey_search::InternedStringPtr>, std::equal_to<valkey_search::InternedStringPtr>, std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >::~raw_hash_set() /.build-release-asan/.deps/install/include/absl/container/internal/raw_hash_set.h:2838
    #13 0xc18fbd in absl::lts_20240722::container_internal::raw_hash_map<absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex>, absl::lts_20240722::hash_internal::Hash<valkey_search::InternedStringPtr>, std::equal_to<valkey_search::InternedStringPtr>, std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >::~raw_hash_map() /.build-release-asan/.deps/install/include/absl/container/internal/raw_hash_map.h:33
    #14 0xc18fbd in absl::lts_20240722::node_hash_map<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex, absl::lts_20240722::hash_internal::Hash<valkey_search::InternedStringPtr>, std::equal_to<valkey_search::InternedStringPtr>, std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >::~node_hash_map() /.build-release-asan/.deps/install/include/absl/container/node_hash_map.h:123
    #15 0xc18fbd in valkey_search::indexes::text::TextIndexSchema::~TextIndexSchema() /src/indexes/text/text_index.h:89
    #16 0xc18fbd in void std::destroy_at<valkey_search::indexes::text::TextIndexSchema>(valkey_search::indexes::text::TextIndexSchema*) /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/stl_construct.h:88
    #17 0xc18fbd in void std::_Destroy<valkey_search::indexes::text::TextIndexSchema>(valkey_search::indexes::text::TextIndexSchema*) /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/stl_construct.h:149
    #18 0xc18fbd in void std::allocator_traits<std::allocator<void> >::destroy<valkey_search::indexes::text::TextIndexSchema>(std::allocator<void>&, valkey_search::indexes::text::TextIndexSchema*) /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/alloc_traits.h:671
    #19 0xc18fbd in std::_Sp_counted_ptr_inplace<valkey_search::indexes::text::TextIndexSchema, std::allocator<void>, (__gnu_cxx::_Lock_policy)2>::_M_dispose() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/shared_ptr_base.h:616
    #20 0x76e355 in std::_Sp_counted_base<(__gnu_cxx::_Lock_policy)2>::_M_release() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/shared_ptr_base.h:346
    #21 0xd37753 in std::__shared_count<(__gnu_cxx::_Lock_policy)2>::~__shared_count() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/shared_ptr_base.h:1069
    #22 0xd37753 in std::__shared_ptr<valkey_search::indexes::text::TextIndexSchema, (__gnu_cxx::_Lock_policy)2>::~__shared_ptr() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/shared_ptr_base.h:1525
    #23 0xd37753 in std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>::~shared_ptr() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/shared_ptr.h:175
    #24 0xd37753 in valkey_search::indexes::TextTest::~TextTest() /testing/text_test.cc:42
    #25 0xd37753 in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::~TextTest_LargeDocumentTokenization_Test() /testing/text_test.cc:314
    #26 0xd37753 in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::~TextTest_LargeDocumentTokenization_Test() /testing/text_test.cc:314
    #27 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #28 0x153f75b in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f75b)
    #29 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #30 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #31 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #32 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #33 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #34 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

PREFIX TREE - word: 'word1' ptr: 0x50600003af40 refcount: 2
ReleaseRef() ptr_=0x50600003af40 refcount=2 -> 1
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdb4b63 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdb4b63 in valkey_search::indexes::text::TextIndex::~TextIndex() /src/indexes/text/text_index.cc:106
    #4 0xc18fbd in std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>::~pair() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/stl_pair.h:284
    #5 0xc18fbd in void std::destroy_at<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> >(std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>*) /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/stl_construct.h:88
    #6 0xc18fbd in void std::allocator_traits<std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >::destroy<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> >(std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> >&, std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>*) /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/alloc_traits.h:556
    #7 0xc18fbd in void absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex>::delete_element<std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >(std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> >*, std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>*) /.build-release-asan/.deps/install/include/absl/container/node_hash_map.h:623
    #8 0xc18fbd in void absl::lts_20240722::container_internal::node_slot_policy<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>&, absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex> >::destroy<std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >(std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> >*, std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>**) /.build-release-asan/.deps/install/include/absl/container/internal/node_slot_policy.h:62
    #9 0xc18fbd in auto absl::lts_20240722::container_internal::common_policy_traits<absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex>, void>::destroy<std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >(std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> >*, std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>**) /.build-release-asan/.deps/install/include/absl/container/internal/common_policy_traits.h:51
    #10 0xc18fbd in absl::lts_20240722::container_internal::raw_hash_set<absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex>, absl::lts_20240722::hash_internal::Hash<valkey_search::InternedStringPtr>, std::equal_to<valkey_search::InternedStringPtr>, std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >::destroy(std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>**) /.build-release-asan/.deps/install/include/absl/container/internal/raw_hash_set.h:3485
    #11 0xc18fbd in absl::lts_20240722::container_internal::raw_hash_set<absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex>, absl::lts_20240722::hash_internal::Hash<valkey_search::InternedStringPtr>, std::equal_to<valkey_search::InternedStringPtr>, std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >::destructor_impl() /.build-release-asan/.deps/install/include/absl/container/internal/raw_hash_set.h:3554
    #12 0xc18fbd in absl::lts_20240722::container_internal::raw_hash_set<absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex>, absl::lts_20240722::hash_internal::Hash<valkey_search::InternedStringPtr>, std::equal_to<valkey_search::InternedStringPtr>, std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >::~raw_hash_set() /.build-release-asan/.deps/install/include/absl/container/internal/raw_hash_set.h:2838
    #13 0xc18fbd in absl::lts_20240722::container_internal::raw_hash_map<absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex>, absl::lts_20240722::hash_internal::Hash<valkey_search::InternedStringPtr>, std::equal_to<valkey_search::InternedStringPtr>, std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >::~raw_hash_map() /.build-release-asan/.deps/install/include/absl/container/internal/raw_hash_map.h:33
    #14 0xc18fbd in absl::lts_20240722::node_hash_map<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex, absl::lts_20240722::hash_internal::Hash<valkey_search::InternedStringPtr>, std::equal_to<valkey_search::InternedStringPtr>, std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >::~node_hash_map() /.build-release-asan/.deps/install/include/absl/container/node_hash_map.h:123
    #15 0xc18fbd in valkey_search::indexes::text::TextIndexSchema::~TextIndexSchema() /src/indexes/text/text_index.h:89
    #16 0xc18fbd in void std::destroy_at<valkey_search::indexes::text::TextIndexSchema>(valkey_search::indexes::text::TextIndexSchema*) /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/stl_construct.h:88
    #17 0xc18fbd in void std::_Destroy<valkey_search::indexes::text::TextIndexSchema>(valkey_search::indexes::text::TextIndexSchema*) /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/stl_construct.h:149
    #18 0xc18fbd in void std::allocator_traits<std::allocator<void> >::destroy<valkey_search::indexes::text::TextIndexSchema>(std::allocator<void>&, valkey_search::indexes::text::TextIndexSchema*) /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/alloc_traits.h:671
    #19 0xc18fbd in std::_Sp_counted_ptr_inplace<valkey_search::indexes::text::TextIndexSchema, std::allocator<void>, (__gnu_cxx::_Lock_policy)2>::_M_dispose() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/shared_ptr_base.h:616
    #20 0x76e355 in std::_Sp_counted_base<(__gnu_cxx::_Lock_policy)2>::_M_release() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/shared_ptr_base.h:346
    #21 0xd37753 in std::__shared_count<(__gnu_cxx::_Lock_policy)2>::~__shared_count() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/shared_ptr_base.h:1069
    #22 0xd37753 in std::__shared_ptr<valkey_search::indexes::text::TextIndexSchema, (__gnu_cxx::_Lock_policy)2>::~__shared_ptr() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/shared_ptr_base.h:1525
    #23 0xd37753 in std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>::~shared_ptr() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/shared_ptr.h:175
    #24 0xd37753 in valkey_search::indexes::TextTest::~TextTest() /testing/text_test.cc:42
    #25 0xd37753 in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::~TextTest_LargeDocumentTokenization_Test() /testing/text_test.cc:314
    #26 0xd37753 in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::~TextTest_LargeDocumentTokenization_Test() /testing/text_test.cc:314
    #27 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #28 0x153f75b in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f75b)
    #29 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #30 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #31 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #32 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #33 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #34 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

PREFIX TREE - word: 'word2' ptr: 0x506000038ba0 refcount: 2
ReleaseRef() ptr_=0x506000038ba0 refcount=2 -> 1
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdb4b63 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdb4b63 in valkey_search::indexes::text::TextIndex::~TextIndex() /src/indexes/text/text_index.cc:106
    #4 0xc18fbd in std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>::~pair() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/stl_pair.h:284
    #5 0xc18fbd in void std::destroy_at<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> >(std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>*) /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/stl_construct.h:88
    #6 0xc18fbd in void std::allocator_traits<std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >::destroy<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> >(std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> >&, std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>*) /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/alloc_traits.h:556
    #7 0xc18fbd in void absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex>::delete_element<std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >(std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> >*, std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>*) /.build-release-asan/.deps/install/include/absl/container/node_hash_map.h:623
    #8 0xc18fbd in void absl::lts_20240722::container_internal::node_slot_policy<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>&, absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex> >::destroy<std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >(std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> >*, std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>**) /.build-release-asan/.deps/install/include/absl/container/internal/node_slot_policy.h:62
    #9 0xc18fbd in auto absl::lts_20240722::container_internal::common_policy_traits<absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex>, void>::destroy<std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >(std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> >*, std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>**) /.build-release-asan/.deps/install/include/absl/container/internal/common_policy_traits.h:51
    #10 0xc18fbd in absl::lts_20240722::container_internal::raw_hash_set<absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex>, absl::lts_20240722::hash_internal::Hash<valkey_search::InternedStringPtr>, std::equal_to<valkey_search::InternedStringPtr>, std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >::destroy(std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>**) /.build-release-asan/.deps/install/include/absl/container/internal/raw_hash_set.h:3485
    #11 0xc18fbd in absl::lts_20240722::container_internal::raw_hash_set<absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex>, absl::lts_20240722::hash_internal::Hash<valkey_search::InternedStringPtr>, std::equal_to<valkey_search::InternedStringPtr>, std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >::destructor_impl() /.build-release-asan/.deps/install/include/absl/container/internal/raw_hash_set.h:3554
    #12 0xc18fbd in absl::lts_20240722::container_internal::raw_hash_set<absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex>, absl::lts_20240722::hash_internal::Hash<valkey_search::InternedStringPtr>, std::equal_to<valkey_search::InternedStringPtr>, std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >::~raw_hash_set() /.build-release-asan/.deps/install/include/absl/container/internal/raw_hash_set.h:2838
    #13 0xc18fbd in absl::lts_20240722::container_internal::raw_hash_map<absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex>, absl::lts_20240722::hash_internal::Hash<valkey_search::InternedStringPtr>, std::equal_to<valkey_search::InternedStringPtr>, std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >::~raw_hash_map() /.build-release-asan/.deps/install/include/absl/container/internal/raw_hash_map.h:33
    #14 0xc18fbd in absl::lts_20240722::node_hash_map<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex, absl::lts_20240722::hash_internal::Hash<valkey_search::InternedStringPtr>, std::equal_to<valkey_search::InternedStringPtr>, std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >::~node_hash_map() /.build-release-asan/.deps/install/include/absl/container/node_hash_map.h:123
    #15 0xc18fbd in valkey_search::indexes::text::TextIndexSchema::~TextIndexSchema() /src/indexes/text/text_index.h:89
    #16 0xc18fbd in void std::destroy_at<valkey_search::indexes::text::TextIndexSchema>(valkey_search::indexes::text::TextIndexSchema*) /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/stl_construct.h:88
    #17 0xc18fbd in void std::_Destroy<valkey_search::indexes::text::TextIndexSchema>(valkey_search::indexes::text::TextIndexSchema*) /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/stl_construct.h:149
    #18 0xc18fbd in void std::allocator_traits<std::allocator<void> >::destroy<valkey_search::indexes::text::TextIndexSchema>(std::allocator<void>&, valkey_search::indexes::text::TextIndexSchema*) /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/alloc_traits.h:671
    #19 0xc18fbd in std::_Sp_counted_ptr_inplace<valkey_search::indexes::text::TextIndexSchema, std::allocator<void>, (__gnu_cxx::_Lock_policy)2>::_M_dispose() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/shared_ptr_base.h:616
    #20 0x76e355 in std::_Sp_counted_base<(__gnu_cxx::_Lock_policy)2>::_M_release() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/shared_ptr_base.h:346
    #21 0xd37753 in std::__shared_count<(__gnu_cxx::_Lock_policy)2>::~__shared_count() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/shared_ptr_base.h:1069
    #22 0xd37753 in std::__shared_ptr<valkey_search::indexes::text::TextIndexSchema, (__gnu_cxx::_Lock_policy)2>::~__shared_ptr() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/shared_ptr_base.h:1525
    #23 0xd37753 in std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>::~shared_ptr() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/shared_ptr.h:175
    #24 0xd37753 in valkey_search::indexes::TextTest::~TextTest() /testing/text_test.cc:42
    #25 0xd37753 in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::~TextTest_LargeDocumentTokenization_Test() /testing/text_test.cc:314
    #26 0xd37753 in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::~TextTest_LargeDocumentTokenization_Test() /testing/text_test.cc:314
    #27 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #28 0x153f75b in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f75b)
    #29 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #30 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #31 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #32 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #33 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #34 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

PREFIX TREE - word: 'word3' ptr: 0x50600003ae80 refcount: 2
ReleaseRef() ptr_=0x50600003ae80 refcount=2 -> 1
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdb4b63 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdb4b63 in valkey_search::indexes::text::TextIndex::~TextIndex() /src/indexes/text/text_index.cc:106
    #4 0xc18fbd in std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>::~pair() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/stl_pair.h:284
    #5 0xc18fbd in void std::destroy_at<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> >(std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>*) /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/stl_construct.h:88
    #6 0xc18fbd in void std::allocator_traits<std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >::destroy<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> >(std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> >&, std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>*) /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/alloc_traits.h:556
    #7 0xc18fbd in void absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex>::delete_element<std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >(std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> >*, std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>*) /.build-release-asan/.deps/install/include/absl/container/node_hash_map.h:623
    #8 0xc18fbd in void absl::lts_20240722::container_internal::node_slot_policy<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>&, absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex> >::destroy<std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >(std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> >*, std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>**) /.build-release-asan/.deps/install/include/absl/container/internal/node_slot_policy.h:62
    #9 0xc18fbd in auto absl::lts_20240722::container_internal::common_policy_traits<absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex>, void>::destroy<std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >(std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> >*, std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>**) /.build-release-asan/.deps/install/include/absl/container/internal/common_policy_traits.h:51
    #10 0xc18fbd in absl::lts_20240722::container_internal::raw_hash_set<absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex>, absl::lts_20240722::hash_internal::Hash<valkey_search::InternedStringPtr>, std::equal_to<valkey_search::InternedStringPtr>, std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >::destroy(std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>**) /.build-release-asan/.deps/install/include/absl/container/internal/raw_hash_set.h:3485
    #11 0xc18fbd in absl::lts_20240722::container_internal::raw_hash_set<absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex>, absl::lts_20240722::hash_internal::Hash<valkey_search::InternedStringPtr>, std::equal_to<valkey_search::InternedStringPtr>, std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >::destructor_impl() /.build-release-asan/.deps/install/include/absl/container/internal/raw_hash_set.h:3554
    #12 0xc18fbd in absl::lts_20240722::container_internal::raw_hash_set<absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex>, absl::lts_20240722::hash_internal::Hash<valkey_search::InternedStringPtr>, std::equal_to<valkey_search::InternedStringPtr>, std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >::~raw_hash_set() /.build-release-asan/.deps/install/include/absl/container/internal/raw_hash_set.h:2838
    #13 0xc18fbd in absl::lts_20240722::container_internal::raw_hash_map<absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex>, absl::lts_20240722::hash_internal::Hash<valkey_search::InternedStringPtr>, std::equal_to<valkey_search::InternedStringPtr>, std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >::~raw_hash_map() /.build-release-asan/.deps/install/include/absl/container/internal/raw_hash_map.h:33
    #14 0xc18fbd in absl::lts_20240722::node_hash_map<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex, absl::lts_20240722::hash_internal::Hash<valkey_search::InternedStringPtr>, std::equal_to<valkey_search::InternedStringPtr>, std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >::~node_hash_map() /.build-release-asan/.deps/install/include/absl/container/node_hash_map.h:123
    #15 0xc18fbd in valkey_search::indexes::text::TextIndexSchema::~TextIndexSchema() /src/indexes/text/text_index.h:89
    #16 0xc18fbd in void std::destroy_at<valkey_search::indexes::text::TextIndexSchema>(valkey_search::indexes::text::TextIndexSchema*) /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/stl_construct.h:88
    #17 0xc18fbd in void std::_Destroy<valkey_search::indexes::text::TextIndexSchema>(valkey_search::indexes::text::TextIndexSchema*) /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/stl_construct.h:149
    #18 0xc18fbd in void std::allocator_traits<std::allocator<void> >::destroy<valkey_search::indexes::text::TextIndexSchema>(std::allocator<void>&, valkey_search::indexes::text::TextIndexSchema*) /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/alloc_traits.h:671
    #19 0xc18fbd in std::_Sp_counted_ptr_inplace<valkey_search::indexes::text::TextIndexSchema, std::allocator<void>, (__gnu_cxx::_Lock_policy)2>::_M_dispose() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/shared_ptr_base.h:616
    #20 0x76e355 in std::_Sp_counted_base<(__gnu_cxx::_Lock_policy)2>::_M_release() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/shared_ptr_base.h:346
    #21 0xd37753 in std::__shared_count<(__gnu_cxx::_Lock_policy)2>::~__shared_count() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/shared_ptr_base.h:1069
    #22 0xd37753 in std::__shared_ptr<valkey_search::indexes::text::TextIndexSchema, (__gnu_cxx::_Lock_policy)2>::~__shared_ptr() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/shared_ptr_base.h:1525
    #23 0xd37753 in std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>::~shared_ptr() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/shared_ptr.h:175
    #24 0xd37753 in valkey_search::indexes::TextTest::~TextTest() /testing/text_test.cc:42
    #25 0xd37753 in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::~TextTest_LargeDocumentTokenization_Test() /testing/text_test.cc:314
    #26 0xd37753 in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::~TextTest_LargeDocumentTokenization_Test() /testing/text_test.cc:314
    #27 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #28 0x153f75b in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f75b)
    #29 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #30 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #31 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #32 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #33 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #34 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

PREFIX TREE - word: 'word4' ptr: 0x50600003afa0 refcount: 2
ReleaseRef() ptr_=0x50600003afa0 refcount=2 -> 1
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdb4b63 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdb4b63 in valkey_search::indexes::text::TextIndex::~TextIndex() /src/indexes/text/text_index.cc:106
    #4 0xc18fbd in std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>::~pair() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/stl_pair.h:284
    #5 0xc18fbd in void std::destroy_at<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> >(std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>*) /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/stl_construct.h:88
    #6 0xc18fbd in void std::allocator_traits<std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >::destroy<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> >(std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> >&, std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>*) /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/alloc_traits.h:556
    #7 0xc18fbd in void absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex>::delete_element<std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >(std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> >*, std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>*) /.build-release-asan/.deps/install/include/absl/container/node_hash_map.h:623
    #8 0xc18fbd in void absl::lts_20240722::container_internal::node_slot_policy<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>&, absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex> >::destroy<std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >(std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> >*, std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>**) /.build-release-asan/.deps/install/include/absl/container/internal/node_slot_policy.h:62
    #9 0xc18fbd in auto absl::lts_20240722::container_internal::common_policy_traits<absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex>, void>::destroy<std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >(std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> >*, std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>**) /.build-release-asan/.deps/install/include/absl/container/internal/common_policy_traits.h:51
    #10 0xc18fbd in absl::lts_20240722::container_internal::raw_hash_set<absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex>, absl::lts_20240722::hash_internal::Hash<valkey_search::InternedStringPtr>, std::equal_to<valkey_search::InternedStringPtr>, std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >::destroy(std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>**) /.build-release-asan/.deps/install/include/absl/container/internal/raw_hash_set.h:3485
    #11 0xc18fbd in absl::lts_20240722::container_internal::raw_hash_set<absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex>, absl::lts_20240722::hash_internal::Hash<valkey_search::InternedStringPtr>, std::equal_to<valkey_search::InternedStringPtr>, std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >::destructor_impl() /.build-release-asan/.deps/install/include/absl/container/internal/raw_hash_set.h:3554
    #12 0xc18fbd in absl::lts_20240722::container_internal::raw_hash_set<absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex>, absl::lts_20240722::hash_internal::Hash<valkey_search::InternedStringPtr>, std::equal_to<valkey_search::InternedStringPtr>, std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >::~raw_hash_set() /.build-release-asan/.deps/install/include/absl/container/internal/raw_hash_set.h:2838
    #13 0xc18fbd in absl::lts_20240722::container_internal::raw_hash_map<absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex>, absl::lts_20240722::hash_internal::Hash<valkey_search::InternedStringPtr>, std::equal_to<valkey_search::InternedStringPtr>, std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >::~raw_hash_map() /.build-release-asan/.deps/install/include/absl/container/internal/raw_hash_map.h:33
    #14 0xc18fbd in absl::lts_20240722::node_hash_map<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex, absl::lts_20240722::hash_internal::Hash<valkey_search::InternedStringPtr>, std::equal_to<valkey_search::InternedStringPtr>, std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >::~node_hash_map() /.build-release-asan/.deps/install/include/absl/container/node_hash_map.h:123
    #15 0xc18fbd in valkey_search::indexes::text::TextIndexSchema::~TextIndexSchema() /src/indexes/text/text_index.h:89
    #16 0xc18fbd in void std::destroy_at<valkey_search::indexes::text::TextIndexSchema>(valkey_search::indexes::text::TextIndexSchema*) /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/stl_construct.h:88
    #17 0xc18fbd in void std::_Destroy<valkey_search::indexes::text::TextIndexSchema>(valkey_search::indexes::text::TextIndexSchema*) /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/stl_construct.h:149
    #18 0xc18fbd in void std::allocator_traits<std::allocator<void> >::destroy<valkey_search::indexes::text::TextIndexSchema>(std::allocator<void>&, valkey_search::indexes::text::TextIndexSchema*) /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/alloc_traits.h:671
    #19 0xc18fbd in std::_Sp_counted_ptr_inplace<valkey_search::indexes::text::TextIndexSchema, std::allocator<void>, (__gnu_cxx::_Lock_policy)2>::_M_dispose() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/shared_ptr_base.h:616
    #20 0x76e355 in std::_Sp_counted_base<(__gnu_cxx::_Lock_policy)2>::_M_release() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/shared_ptr_base.h:346
    #21 0xd37753 in std::__shared_count<(__gnu_cxx::_Lock_policy)2>::~__shared_count() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/shared_ptr_base.h:1069
    #22 0xd37753 in std::__shared_ptr<valkey_search::indexes::text::TextIndexSchema, (__gnu_cxx::_Lock_policy)2>::~__shared_ptr() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/shared_ptr_base.h:1525
    #23 0xd37753 in std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>::~shared_ptr() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/shared_ptr.h:175
    #24 0xd37753 in valkey_search::indexes::TextTest::~TextTest() /testing/text_test.cc:42
    #25 0xd37753 in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::~TextTest_LargeDocumentTokenization_Test() /testing/text_test.cc:314
    #26 0xd37753 in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::~TextTest_LargeDocumentTokenization_Test() /testing/text_test.cc:314
    #27 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #28 0x153f75b in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f75b)
    #29 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #30 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #31 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #32 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #33 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #34 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

PREFIX TREE - word: 'word5' ptr: 0x50600003aee0 refcount: 2
ReleaseRef() ptr_=0x50600003aee0 refcount=2 -> 1
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdb4b63 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdb4b63 in valkey_search::indexes::text::TextIndex::~TextIndex() /src/indexes/text/text_index.cc:106
    #4 0xc18fbd in std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>::~pair() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/stl_pair.h:284
    #5 0xc18fbd in void std::destroy_at<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> >(std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>*) /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/stl_construct.h:88
    #6 0xc18fbd in void std::allocator_traits<std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >::destroy<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> >(std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> >&, std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>*) /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/alloc_traits.h:556
    #7 0xc18fbd in void absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex>::delete_element<std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >(std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> >*, std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>*) /.build-release-asan/.deps/install/include/absl/container/node_hash_map.h:623
    #8 0xc18fbd in void absl::lts_20240722::container_internal::node_slot_policy<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>&, absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex> >::destroy<std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >(std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> >*, std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>**) /.build-release-asan/.deps/install/include/absl/container/internal/node_slot_policy.h:62
    #9 0xc18fbd in auto absl::lts_20240722::container_internal::common_policy_traits<absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex>, void>::destroy<std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >(std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> >*, std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>**) /.build-release-asan/.deps/install/include/absl/container/internal/common_policy_traits.h:51
    #10 0xc18fbd in absl::lts_20240722::container_internal::raw_hash_set<absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex>, absl::lts_20240722::hash_internal::Hash<valkey_search::InternedStringPtr>, std::equal_to<valkey_search::InternedStringPtr>, std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >::destroy(std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>**) /.build-release-asan/.deps/install/include/absl/container/internal/raw_hash_set.h:3485
    #11 0xc18fbd in absl::lts_20240722::container_internal::raw_hash_set<absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex>, absl::lts_20240722::hash_internal::Hash<valkey_search::InternedStringPtr>, std::equal_to<valkey_search::InternedStringPtr>, std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >::destructor_impl() /.build-release-asan/.deps/install/include/absl/container/internal/raw_hash_set.h:3554
    #12 0xc18fbd in absl::lts_20240722::container_internal::raw_hash_set<absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex>, absl::lts_20240722::hash_internal::Hash<valkey_search::InternedStringPtr>, std::equal_to<valkey_search::InternedStringPtr>, std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >::~raw_hash_set() /.build-release-asan/.deps/install/include/absl/container/internal/raw_hash_set.h:2838
    #13 0xc18fbd in absl::lts_20240722::container_internal::raw_hash_map<absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex>, absl::lts_20240722::hash_internal::Hash<valkey_search::InternedStringPtr>, std::equal_to<valkey_search::InternedStringPtr>, std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >::~raw_hash_map() /.build-release-asan/.deps/install/include/absl/container/internal/raw_hash_map.h:33
    #14 0xc18fbd in absl::lts_20240722::node_hash_map<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex, absl::lts_20240722::hash_internal::Hash<valkey_search::InternedStringPtr>, std::equal_to<valkey_search::InternedStringPtr>, std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >::~node_hash_map() /.build-release-asan/.deps/install/include/absl/container/node_hash_map.h:123
    #15 0xc18fbd in valkey_search::indexes::text::TextIndexSchema::~TextIndexSchema() /src/indexes/text/text_index.h:89
    #16 0xc18fbd in void std::destroy_at<valkey_search::indexes::text::TextIndexSchema>(valkey_search::indexes::text::TextIndexSchema*) /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/stl_construct.h:88
    #17 0xc18fbd in void std::_Destroy<valkey_search::indexes::text::TextIndexSchema>(valkey_search::indexes::text::TextIndexSchema*) /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/stl_construct.h:149
    #18 0xc18fbd in void std::allocator_traits<std::allocator<void> >::destroy<valkey_search::indexes::text::TextIndexSchema>(std::allocator<void>&, valkey_search::indexes::text::TextIndexSchema*) /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/alloc_traits.h:671
    #19 0xc18fbd in std::_Sp_counted_ptr_inplace<valkey_search::indexes::text::TextIndexSchema, std::allocator<void>, (__gnu_cxx::_Lock_policy)2>::_M_dispose() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/shared_ptr_base.h:616
    #20 0x76e355 in std::_Sp_counted_base<(__gnu_cxx::_Lock_policy)2>::_M_release() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/shared_ptr_base.h:346
    #21 0xd37753 in std::__shared_count<(__gnu_cxx::_Lock_policy)2>::~__shared_count() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/shared_ptr_base.h:1069
    #22 0xd37753 in std::__shared_ptr<valkey_search::indexes::text::TextIndexSchema, (__gnu_cxx::_Lock_policy)2>::~__shared_ptr() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/shared_ptr_base.h:1525
    #23 0xd37753 in std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>::~shared_ptr() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/shared_ptr.h:175
    #24 0xd37753 in valkey_search::indexes::TextTest::~TextTest() /testing/text_test.cc:42
    #25 0xd37753 in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::~TextTest_LargeDocumentTokenization_Test() /testing/text_test.cc:314
    #26 0xd37753 in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::~TextTest_LargeDocumentTokenization_Test() /testing/text_test.cc:314
    #27 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #28 0x153f75b in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f75b)
    #29 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #30 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #31 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #32 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #33 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #34 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

PREFIX TREE - word: 'word6' ptr: 0x506000038060 refcount: 2
ReleaseRef() ptr_=0x506000038060 refcount=2 -> 1
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdb4b63 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdb4b63 in valkey_search::indexes::text::TextIndex::~TextIndex() /src/indexes/text/text_index.cc:106
    #4 0xc18fbd in std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>::~pair() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/stl_pair.h:284
    #5 0xc18fbd in void std::destroy_at<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> >(std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>*) /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/stl_construct.h:88
    #6 0xc18fbd in void std::allocator_traits<std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >::destroy<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> >(std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> >&, std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>*) /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/alloc_traits.h:556
    #7 0xc18fbd in void absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex>::delete_element<std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >(std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> >*, std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>*) /.build-release-asan/.deps/install/include/absl/container/node_hash_map.h:623
    #8 0xc18fbd in void absl::lts_20240722::container_internal::node_slot_policy<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>&, absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex> >::destroy<std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >(std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> >*, std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>**) /.build-release-asan/.deps/install/include/absl/container/internal/node_slot_policy.h:62
    #9 0xc18fbd in auto absl::lts_20240722::container_internal::common_policy_traits<absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex>, void>::destroy<std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >(std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> >*, std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>**) /.build-release-asan/.deps/install/include/absl/container/internal/common_policy_traits.h:51
    #10 0xc18fbd in absl::lts_20240722::container_internal::raw_hash_set<absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex>, absl::lts_20240722::hash_internal::Hash<valkey_search::InternedStringPtr>, std::equal_to<valkey_search::InternedStringPtr>, std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >::destroy(std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>**) /.build-release-asan/.deps/install/include/absl/container/internal/raw_hash_set.h:3485
    #11 0xc18fbd in absl::lts_20240722::container_internal::raw_hash_set<absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex>, absl::lts_20240722::hash_internal::Hash<valkey_search::InternedStringPtr>, std::equal_to<valkey_search::InternedStringPtr>, std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >::destructor_impl() /.build-release-asan/.deps/install/include/absl/container/internal/raw_hash_set.h:3554
    #12 0xc18fbd in absl::lts_20240722::container_internal::raw_hash_set<absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex>, absl::lts_20240722::hash_internal::Hash<valkey_search::InternedStringPtr>, std::equal_to<valkey_search::InternedStringPtr>, std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >::~raw_hash_set() /.build-release-asan/.deps/install/include/absl/container/internal/raw_hash_set.h:2838
    #13 0xc18fbd in absl::lts_20240722::container_internal::raw_hash_map<absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex>, absl::lts_20240722::hash_internal::Hash<valkey_search::InternedStringPtr>, std::equal_to<valkey_search::InternedStringPtr>, std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >::~raw_hash_map() /.build-release-asan/.deps/install/include/absl/container/internal/raw_hash_map.h:33
    #14 0xc18fbd in absl::lts_20240722::node_hash_map<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex, absl::lts_20240722::hash_internal::Hash<valkey_search::InternedStringPtr>, std::equal_to<valkey_search::InternedStringPtr>, std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >::~node_hash_map() /.build-release-asan/.deps/install/include/absl/container/node_hash_map.h:123
    #15 0xc18fbd in valkey_search::indexes::text::TextIndexSchema::~TextIndexSchema() /src/indexes/text/text_index.h:89
    #16 0xc18fbd in void std::destroy_at<valkey_search::indexes::text::TextIndexSchema>(valkey_search::indexes::text::TextIndexSchema*) /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/stl_construct.h:88
    #17 0xc18fbd in void std::_Destroy<valkey_search::indexes::text::TextIndexSchema>(valkey_search::indexes::text::TextIndexSchema*) /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/stl_construct.h:149
    #18 0xc18fbd in void std::allocator_traits<std::allocator<void> >::destroy<valkey_search::indexes::text::TextIndexSchema>(std::allocator<void>&, valkey_search::indexes::text::TextIndexSchema*) /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/alloc_traits.h:671
    #19 0xc18fbd in std::_Sp_counted_ptr_inplace<valkey_search::indexes::text::TextIndexSchema, std::allocator<void>, (__gnu_cxx::_Lock_policy)2>::_M_dispose() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/shared_ptr_base.h:616
    #20 0x76e355 in std::_Sp_counted_base<(__gnu_cxx::_Lock_policy)2>::_M_release() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/shared_ptr_base.h:346
    #21 0xd37753 in std::__shared_count<(__gnu_cxx::_Lock_policy)2>::~__shared_count() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/shared_ptr_base.h:1069
    #22 0xd37753 in std::__shared_ptr<valkey_search::indexes::text::TextIndexSchema, (__gnu_cxx::_Lock_policy)2>::~__shared_ptr() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/shared_ptr_base.h:1525
    #23 0xd37753 in std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>::~shared_ptr() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/shared_ptr.h:175
    #24 0xd37753 in valkey_search::indexes::TextTest::~TextTest() /testing/text_test.cc:42
    #25 0xd37753 in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::~TextTest_LargeDocumentTokenization_Test() /testing/text_test.cc:314
    #26 0xd37753 in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::~TextTest_LargeDocumentTokenization_Test() /testing/text_test.cc:314
    #27 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #28 0x153f75b in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f75b)
    #29 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #30 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #31 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #32 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #33 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #34 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

PREFIX TREE - word: 'word7' ptr: 0x50600003b060 refcount: 2
ReleaseRef() ptr_=0x50600003b060 refcount=2 -> 1
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdb4b63 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdb4b63 in valkey_search::indexes::text::TextIndex::~TextIndex() /src/indexes/text/text_index.cc:106
    #4 0xc18fbd in std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>::~pair() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/stl_pair.h:284
    #5 0xc18fbd in void std::destroy_at<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> >(std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>*) /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/stl_construct.h:88
    #6 0xc18fbd in void std::allocator_traits<std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >::destroy<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> >(std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> >&, std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>*) /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/alloc_traits.h:556
    #7 0xc18fbd in void absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex>::delete_element<std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >(std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> >*, std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>*) /.build-release-asan/.deps/install/include/absl/container/node_hash_map.h:623
    #8 0xc18fbd in void absl::lts_20240722::container_internal::node_slot_policy<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>&, absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex> >::destroy<std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >(std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> >*, std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>**) /.build-release-asan/.deps/install/include/absl/container/internal/node_slot_policy.h:62
    #9 0xc18fbd in auto absl::lts_20240722::container_internal::common_policy_traits<absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex>, void>::destroy<std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >(std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> >*, std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>**) /.build-release-asan/.deps/install/include/absl/container/internal/common_policy_traits.h:51
    #10 0xc18fbd in absl::lts_20240722::container_internal::raw_hash_set<absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex>, absl::lts_20240722::hash_internal::Hash<valkey_search::InternedStringPtr>, std::equal_to<valkey_search::InternedStringPtr>, std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >::destroy(std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>**) /.build-release-asan/.deps/install/include/absl/container/internal/raw_hash_set.h:3485
    #11 0xc18fbd in absl::lts_20240722::container_internal::raw_hash_set<absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex>, absl::lts_20240722::hash_internal::Hash<valkey_search::InternedStringPtr>, std::equal_to<valkey_search::InternedStringPtr>, std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >::destructor_impl() /.build-release-asan/.deps/install/include/absl/container/internal/raw_hash_set.h:3554
    #12 0xc18fbd in absl::lts_20240722::container_internal::raw_hash_set<absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex>, absl::lts_20240722::hash_internal::Hash<valkey_search::InternedStringPtr>, std::equal_to<valkey_search::InternedStringPtr>, std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >::~raw_hash_set() /.build-release-asan/.deps/install/include/absl/container/internal/raw_hash_set.h:2838
    #13 0xc18fbd in absl::lts_20240722::container_internal::raw_hash_map<absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex>, absl::lts_20240722::hash_internal::Hash<valkey_search::InternedStringPtr>, std::equal_to<valkey_search::InternedStringPtr>, std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >::~raw_hash_map() /.build-release-asan/.deps/install/include/absl/container/internal/raw_hash_map.h:33
    #14 0xc18fbd in absl::lts_20240722::node_hash_map<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex, absl::lts_20240722::hash_internal::Hash<valkey_search::InternedStringPtr>, std::equal_to<valkey_search::InternedStringPtr>, std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >::~node_hash_map() /.build-release-asan/.deps/install/include/absl/container/node_hash_map.h:123
    #15 0xc18fbd in valkey_search::indexes::text::TextIndexSchema::~TextIndexSchema() /src/indexes/text/text_index.h:89
    #16 0xc18fbd in void std::destroy_at<valkey_search::indexes::text::TextIndexSchema>(valkey_search::indexes::text::TextIndexSchema*) /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/stl_construct.h:88
    #17 0xc18fbd in void std::_Destroy<valkey_search::indexes::text::TextIndexSchema>(valkey_search::indexes::text::TextIndexSchema*) /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/stl_construct.h:149
    #18 0xc18fbd in void std::allocator_traits<std::allocator<void> >::destroy<valkey_search::indexes::text::TextIndexSchema>(std::allocator<void>&, valkey_search::indexes::text::TextIndexSchema*) /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/alloc_traits.h:671
    #19 0xc18fbd in std::_Sp_counted_ptr_inplace<valkey_search::indexes::text::TextIndexSchema, std::allocator<void>, (__gnu_cxx::_Lock_policy)2>::_M_dispose() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/shared_ptr_base.h:616
    #20 0x76e355 in std::_Sp_counted_base<(__gnu_cxx::_Lock_policy)2>::_M_release() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/shared_ptr_base.h:346
    #21 0xd37753 in std::__shared_count<(__gnu_cxx::_Lock_policy)2>::~__shared_count() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/shared_ptr_base.h:1069
    #22 0xd37753 in std::__shared_ptr<valkey_search::indexes::text::TextIndexSchema, (__gnu_cxx::_Lock_policy)2>::~__shared_ptr() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/shared_ptr_base.h:1525
    #23 0xd37753 in std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>::~shared_ptr() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/shared_ptr.h:175
    #24 0xd37753 in valkey_search::indexes::TextTest::~TextTest() /testing/text_test.cc:42
    #25 0xd37753 in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::~TextTest_LargeDocumentTokenization_Test() /testing/text_test.cc:314
    #26 0xd37753 in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::~TextTest_LargeDocumentTokenization_Test() /testing/text_test.cc:314
    #27 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #28 0x153f75b in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f75b)
    #29 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #30 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #31 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #32 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #33 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #34 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

PREFIX TREE - word: 'word8' ptr: 0x506000038120 refcount: 2
ReleaseRef() ptr_=0x506000038120 refcount=2 -> 1
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdb4b63 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdb4b63 in valkey_search::indexes::text::TextIndex::~TextIndex() /src/indexes/text/text_index.cc:106
    #4 0xc18fbd in std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>::~pair() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/stl_pair.h:284
    #5 0xc18fbd in void std::destroy_at<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> >(std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>*) /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/stl_construct.h:88
    #6 0xc18fbd in void std::allocator_traits<std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >::destroy<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> >(std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> >&, std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>*) /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/alloc_traits.h:556
    #7 0xc18fbd in void absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex>::delete_element<std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >(std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> >*, std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>*) /.build-release-asan/.deps/install/include/absl/container/node_hash_map.h:623
    #8 0xc18fbd in void absl::lts_20240722::container_internal::node_slot_policy<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>&, absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex> >::destroy<std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >(std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> >*, std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>**) /.build-release-asan/.deps/install/include/absl/container/internal/node_slot_policy.h:62
    #9 0xc18fbd in auto absl::lts_20240722::container_internal::common_policy_traits<absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex>, void>::destroy<std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >(std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> >*, std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>**) /.build-release-asan/.deps/install/include/absl/container/internal/common_policy_traits.h:51
    #10 0xc18fbd in absl::lts_20240722::container_internal::raw_hash_set<absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex>, absl::lts_20240722::hash_internal::Hash<valkey_search::InternedStringPtr>, std::equal_to<valkey_search::InternedStringPtr>, std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >::destroy(std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>**) /.build-release-asan/.deps/install/include/absl/container/internal/raw_hash_set.h:3485
    #11 0xc18fbd in absl::lts_20240722::container_internal::raw_hash_set<absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex>, absl::lts_20240722::hash_internal::Hash<valkey_search::InternedStringPtr>, std::equal_to<valkey_search::InternedStringPtr>, std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >::destructor_impl() /.build-release-asan/.deps/install/include/absl/container/internal/raw_hash_set.h:3554
    #12 0xc18fbd in absl::lts_20240722::container_internal::raw_hash_set<absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex>, absl::lts_20240722::hash_internal::Hash<valkey_search::InternedStringPtr>, std::equal_to<valkey_search::InternedStringPtr>, std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >::~raw_hash_set() /.build-release-asan/.deps/install/include/absl/container/internal/raw_hash_set.h:2838
    #13 0xc18fbd in absl::lts_20240722::container_internal::raw_hash_map<absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex>, absl::lts_20240722::hash_internal::Hash<valkey_search::InternedStringPtr>, std::equal_to<valkey_search::InternedStringPtr>, std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >::~raw_hash_map() /.build-release-asan/.deps/install/include/absl/container/internal/raw_hash_map.h:33
    #14 0xc18fbd in absl::lts_20240722::node_hash_map<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex, absl::lts_20240722::hash_internal::Hash<valkey_search::InternedStringPtr>, std::equal_to<valkey_search::InternedStringPtr>, std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >::~node_hash_map() /.build-release-asan/.deps/install/include/absl/container/node_hash_map.h:123
    #15 0xc18fbd in valkey_search::indexes::text::TextIndexSchema::~TextIndexSchema() /src/indexes/text/text_index.h:89
    #16 0xc18fbd in void std::destroy_at<valkey_search::indexes::text::TextIndexSchema>(valkey_search::indexes::text::TextIndexSchema*) /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/stl_construct.h:88
    #17 0xc18fbd in void std::_Destroy<valkey_search::indexes::text::TextIndexSchema>(valkey_search::indexes::text::TextIndexSchema*) /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/stl_construct.h:149
    #18 0xc18fbd in void std::allocator_traits<std::allocator<void> >::destroy<valkey_search::indexes::text::TextIndexSchema>(std::allocator<void>&, valkey_search::indexes::text::TextIndexSchema*) /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/alloc_traits.h:671
    #19 0xc18fbd in std::_Sp_counted_ptr_inplace<valkey_search::indexes::text::TextIndexSchema, std::allocator<void>, (__gnu_cxx::_Lock_policy)2>::_M_dispose() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/shared_ptr_base.h:616
    #20 0x76e355 in std::_Sp_counted_base<(__gnu_cxx::_Lock_policy)2>::_M_release() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/shared_ptr_base.h:346
    #21 0xd37753 in std::__shared_count<(__gnu_cxx::_Lock_policy)2>::~__shared_count() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/shared_ptr_base.h:1069
    #22 0xd37753 in std::__shared_ptr<valkey_search::indexes::text::TextIndexSchema, (__gnu_cxx::_Lock_policy)2>::~__shared_ptr() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/shared_ptr_base.h:1525
    #23 0xd37753 in std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>::~shared_ptr() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/shared_ptr.h:175
    #24 0xd37753 in valkey_search::indexes::TextTest::~TextTest() /testing/text_test.cc:42
    #25 0xd37753 in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::~TextTest_LargeDocumentTokenization_Test() /testing/text_test.cc:314
    #26 0xd37753 in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::~TextTest_LargeDocumentTokenization_Test() /testing/text_test.cc:314
    #27 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #28 0x153f75b in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f75b)
    #29 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #30 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #31 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #32 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #33 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #34 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

PREFIX TREE - word: 'word9' ptr: 0x506000038c00 refcount: 2
ReleaseRef() ptr_=0x506000038c00 refcount=2 -> 1
    #0 0x7f1d55deaaae in __sanitizer_print_stack_trace /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_stack.cpp:87
    #1 0xd2bbac in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:146
    #2 0xdb4b63 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdb4b63 in valkey_search::indexes::text::TextIndex::~TextIndex() /src/indexes/text/text_index.cc:106
    #4 0xc18fbd in std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>::~pair() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/stl_pair.h:284
    #5 0xc18fbd in void std::destroy_at<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> >(std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>*) /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/stl_construct.h:88
    #6 0xc18fbd in void std::allocator_traits<std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >::destroy<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> >(std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> >&, std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>*) /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/alloc_traits.h:556
    #7 0xc18fbd in void absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex>::delete_element<std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >(std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> >*, std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>*) /.build-release-asan/.deps/install/include/absl/container/node_hash_map.h:623
    #8 0xc18fbd in void absl::lts_20240722::container_internal::node_slot_policy<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>&, absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex> >::destroy<std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >(std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> >*, std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>**) /.build-release-asan/.deps/install/include/absl/container/internal/node_slot_policy.h:62
    #9 0xc18fbd in auto absl::lts_20240722::container_internal::common_policy_traits<absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex>, void>::destroy<std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >(std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> >*, std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>**) /.build-release-asan/.deps/install/include/absl/container/internal/common_policy_traits.h:51
    #10 0xc18fbd in absl::lts_20240722::container_internal::raw_hash_set<absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex>, absl::lts_20240722::hash_internal::Hash<valkey_search::InternedStringPtr>, std::equal_to<valkey_search::InternedStringPtr>, std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >::destroy(std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>**) /.build-release-asan/.deps/install/include/absl/container/internal/raw_hash_set.h:3485
    #11 0xc18fbd in absl::lts_20240722::container_internal::raw_hash_set<absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex>, absl::lts_20240722::hash_internal::Hash<valkey_search::InternedStringPtr>, std::equal_to<valkey_search::InternedStringPtr>, std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >::destructor_impl() /.build-release-asan/.deps/install/include/absl/container/internal/raw_hash_set.h:3554
    #12 0xc18fbd in absl::lts_20240722::container_internal::raw_hash_set<absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex>, absl::lts_20240722::hash_internal::Hash<valkey_search::InternedStringPtr>, std::equal_to<valkey_search::InternedStringPtr>, std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >::~raw_hash_set() /.build-release-asan/.deps/install/include/absl/container/internal/raw_hash_set.h:2838
    #13 0xc18fbd in absl::lts_20240722::container_internal::raw_hash_map<absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex>, absl::lts_20240722::hash_internal::Hash<valkey_search::InternedStringPtr>, std::equal_to<valkey_search::InternedStringPtr>, std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >::~raw_hash_map() /.build-release-asan/.deps/install/include/absl/container/internal/raw_hash_map.h:33
    #14 0xc18fbd in absl::lts_20240722::node_hash_map<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex, absl::lts_20240722::hash_internal::Hash<valkey_search::InternedStringPtr>, std::equal_to<valkey_search::InternedStringPtr>, std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >::~node_hash_map() /.build-release-asan/.deps/install/include/absl/container/node_hash_map.h:123
    #15 0xc18fbd in valkey_search::indexes::text::TextIndexSchema::~TextIndexSchema() /src/indexes/text/text_index.h:89
    #16 0xc18fbd in void std::destroy_at<valkey_search::indexes::text::TextIndexSchema>(valkey_search::indexes::text::TextIndexSchema*) /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/stl_construct.h:88
    #17 0xc18fbd in void std::_Destroy<valkey_search::indexes::text::TextIndexSchema>(valkey_search::indexes::text::TextIndexSchema*) /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/stl_construct.h:149
    #18 0xc18fbd in void std::allocator_traits<std::allocator<void> >::destroy<valkey_search::indexes::text::TextIndexSchema>(std::allocator<void>&, valkey_search::indexes::text::TextIndexSchema*) /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/alloc_traits.h:671
    #19 0xc18fbd in std::_Sp_counted_ptr_inplace<valkey_search::indexes::text::TextIndexSchema, std::allocator<void>, (__gnu_cxx::_Lock_policy)2>::_M_dispose() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/shared_ptr_base.h:616
    #20 0x76e355 in std::_Sp_counted_base<(__gnu_cxx::_Lock_policy)2>::_M_release() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/shared_ptr_base.h:346
    #21 0xd37753 in std::__shared_count<(__gnu_cxx::_Lock_policy)2>::~__shared_count() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/shared_ptr_base.h:1069
    #22 0xd37753 in std::__shared_ptr<valkey_search::indexes::text::TextIndexSchema, (__gnu_cxx::_Lock_policy)2>::~__shared_ptr() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/shared_ptr_base.h:1525
    #23 0xd37753 in std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>::~shared_ptr() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/shared_ptr.h:175
    #24 0xd37753 in valkey_search::indexes::TextTest::~TextTest() /testing/text_test.cc:42
    #25 0xd37753 in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::~TextTest_LargeDocumentTokenization_Test() /testing/text_test.cc:314
    #26 0xd37753 in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::~TextTest_LargeDocumentTokenization_Test() /testing/text_test.cc:314
    #27 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #28 0x153f75b in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f75b)
    #29 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #30 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #31 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #32 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #33 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #34 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

=================================================================
==6806==ERROR: AddressSanitizer: heap-use-after-free on address 0x506000033c80 at pc 0x000000db4b0f bp 0x7fff9174b5f0 sp 0x7fff9174b5e8
READ of size 4 at 0x506000033c80 thread T0
    #0 0xdb4b0e in std::__atomic_base<unsigned int>::load(std::memory_order) const /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/atomic_base.h:501
    #1 0xdb4b0e in valkey_search::indexes::text::TextIndex::~TextIndex() /src/indexes/text/text_index.cc:104
    #2 0xdc2fa4 in void std::destroy_at<valkey_search::indexes::text::TextIndex>(valkey_search::indexes::text::TextIndex*) /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/stl_construct.h:88
    #3 0xdc2fa4 in void std::_Destroy<valkey_search::indexes::text::TextIndex>(valkey_search::indexes::text::TextIndex*) /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/stl_construct.h:149
    #4 0xdc2fa4 in void std::allocator_traits<std::allocator<void> >::destroy<valkey_search::indexes::text::TextIndex>(std::allocator<void>&, valkey_search::indexes::text::TextIndex*) /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/alloc_traits.h:671
    #5 0xdc2fa4 in std::_Sp_counted_ptr_inplace<valkey_search::indexes::text::TextIndex, std::allocator<void>, (__gnu_cxx::_Lock_policy)2>::_M_dispose() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/shared_ptr_base.h:616
    #6 0x76e355 in std::_Sp_counted_base<(__gnu_cxx::_Lock_policy)2>::_M_release() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/shared_ptr_base.h:346
    #7 0xc1898d in std::__shared_count<(__gnu_cxx::_Lock_policy)2>::~__shared_count() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/shared_ptr_base.h:1069
    #8 0xc1898d in std::__shared_ptr<valkey_search::indexes::text::TextIndex, (__gnu_cxx::_Lock_policy)2>::~__shared_ptr() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/shared_ptr_base.h:1525
    #9 0xc1898d in std::shared_ptr<valkey_search::indexes::text::TextIndex>::~shared_ptr() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/shared_ptr.h:175
    #10 0xc1898d in valkey_search::indexes::text::TextIndexSchema::~TextIndexSchema() /src/indexes/text/text_index.h:89
    #11 0xc1898d in void std::destroy_at<valkey_search::indexes::text::TextIndexSchema>(valkey_search::indexes::text::TextIndexSchema*) /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/stl_construct.h:88
    #12 0xc1898d in void std::_Destroy<valkey_search::indexes::text::TextIndexSchema>(valkey_search::indexes::text::TextIndexSchema*) /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/stl_construct.h:149
    #13 0xc1898d in void std::allocator_traits<std::allocator<void> >::destroy<valkey_search::indexes::text::TextIndexSchema>(std::allocator<void>&, valkey_search::indexes::text::TextIndexSchema*) /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/alloc_traits.h:671
    #14 0xc1898d in std::_Sp_counted_ptr_inplace<valkey_search::indexes::text::TextIndexSchema, std::allocator<void>, (__gnu_cxx::_Lock_policy)2>::_M_dispose() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/shared_ptr_base.h:616
    #15 0x76e355 in std::_Sp_counted_base<(__gnu_cxx::_Lock_policy)2>::_M_release() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/shared_ptr_base.h:346
    #16 0xd37753 in std::__shared_count<(__gnu_cxx::_Lock_policy)2>::~__shared_count() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/shared_ptr_base.h:1069
    #17 0xd37753 in std::__shared_ptr<valkey_search::indexes::text::TextIndexSchema, (__gnu_cxx::_Lock_policy)2>::~__shared_ptr() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/shared_ptr_base.h:1525
    #18 0xd37753 in std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>::~shared_ptr() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/shared_ptr.h:175
    #19 0xd37753 in valkey_search::indexes::TextTest::~TextTest() /testing/text_test.cc:42
    #20 0xd37753 in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::~TextTest_LargeDocumentTokenization_Test() /testing/text_test.cc:314
    #21 0xd37753 in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::~TextTest_LargeDocumentTokenization_Test() /testing/text_test.cc:314
    #22 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)
    #23 0x153f75b in testing::TestInfo::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x153f75b)
    #24 0x1554b5e in testing::TestSuite::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1554b5e)
    #25 0x1556e14 in testing::internal::UnitTestImpl::RunAllTests() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1556e14)
    #26 0x1557d1a in testing::UnitTest::Run() (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1557d1a)
    #27 0x606062 in main (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x606062)
    #28 0x7f1d545ae139 in __libc_start_main (/lib64/libc.so.6+0x21139) (BuildId: f7232a63d894d200d05aa390b16aaa93d7a53583)
    #29 0x650ab9 in _start (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x650ab9)

0x506000033c80 is located 0 bytes inside of 56-byte region [0x506000033c80,0x506000033cb8)
freed by thread T0 here:
    #0 0x7f1d55ddf778 in operator delete(void*, unsigned long) /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_new_delete.cpp:164
    #1 0xd2bc35 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::ReleaseRef() /src/indexes/text/invasive_ptr.h:148
    #2 0xdb4b63 in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::~InvasivePtr() /src/indexes/text/invasive_ptr.h:68
    #3 0xdb4b63 in valkey_search::indexes::text::TextIndex::~TextIndex() /src/indexes/text/text_index.cc:106
    #4 0xc18fbd in std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>::~pair() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/stl_pair.h:284
    #5 0xc18fbd in void std::destroy_at<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> >(std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>*) /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/stl_construct.h:88
    #6 0xc18fbd in void std::allocator_traits<std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >::destroy<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> >(std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> >&, std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>*) /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/alloc_traits.h:556
    #7 0xc18fbd in void absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex>::delete_element<std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >(std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> >*, std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>*) /.build-release-asan/.deps/install/include/absl/container/node_hash_map.h:623
    #8 0xc18fbd in void absl::lts_20240722::container_internal::node_slot_policy<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>&, absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex> >::destroy<std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >(std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> >*, std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>**) /.build-release-asan/.deps/install/include/absl/container/internal/node_slot_policy.h:62
    #9 0xc18fbd in auto absl::lts_20240722::container_internal::common_policy_traits<absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex>, void>::destroy<std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >(std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> >*, std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>**) /.build-release-asan/.deps/install/include/absl/container/internal/common_policy_traits.h:51
    #10 0xc18fbd in absl::lts_20240722::container_internal::raw_hash_set<absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex>, absl::lts_20240722::hash_internal::Hash<valkey_search::InternedStringPtr>, std::equal_to<valkey_search::InternedStringPtr>, std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >::destroy(std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex>**) /.build-release-asan/.deps/install/include/absl/container/internal/raw_hash_set.h:3485
    #11 0xc18fbd in absl::lts_20240722::container_internal::raw_hash_set<absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex>, absl::lts_20240722::hash_internal::Hash<valkey_search::InternedStringPtr>, std::equal_to<valkey_search::InternedStringPtr>, std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >::destructor_impl() /.build-release-asan/.deps/install/include/absl/container/internal/raw_hash_set.h:3554
    #12 0xc18fbd in absl::lts_20240722::container_internal::raw_hash_set<absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex>, absl::lts_20240722::hash_internal::Hash<valkey_search::InternedStringPtr>, std::equal_to<valkey_search::InternedStringPtr>, std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >::~raw_hash_set() /.build-release-asan/.deps/install/include/absl/container/internal/raw_hash_set.h:2838
    #13 0xc18fbd in absl::lts_20240722::container_internal::raw_hash_map<absl::lts_20240722::container_internal::NodeHashMapPolicy<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex>, absl::lts_20240722::hash_internal::Hash<valkey_search::InternedStringPtr>, std::equal_to<valkey_search::InternedStringPtr>, std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >::~raw_hash_map() /.build-release-asan/.deps/install/include/absl/container/internal/raw_hash_map.h:33
    #14 0xc18fbd in absl::lts_20240722::node_hash_map<valkey_search::InternedStringPtr, valkey_search::indexes::text::TextIndex, absl::lts_20240722::hash_internal::Hash<valkey_search::InternedStringPtr>, std::equal_to<valkey_search::InternedStringPtr>, std::allocator<std::pair<valkey_search::InternedStringPtr const, valkey_search::indexes::text::TextIndex> > >::~node_hash_map() /.build-release-asan/.deps/install/include/absl/container/node_hash_map.h:123
    #15 0xc18fbd in valkey_search::indexes::text::TextIndexSchema::~TextIndexSchema() /src/indexes/text/text_index.h:89
    #16 0xc18fbd in void std::destroy_at<valkey_search::indexes::text::TextIndexSchema>(valkey_search::indexes::text::TextIndexSchema*) /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/stl_construct.h:88
    #17 0xc18fbd in void std::_Destroy<valkey_search::indexes::text::TextIndexSchema>(valkey_search::indexes::text::TextIndexSchema*) /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/stl_construct.h:149
    #18 0xc18fbd in void std::allocator_traits<std::allocator<void> >::destroy<valkey_search::indexes::text::TextIndexSchema>(std::allocator<void>&, valkey_search::indexes::text::TextIndexSchema*) /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/alloc_traits.h:671
    #19 0xc18fbd in std::_Sp_counted_ptr_inplace<valkey_search::indexes::text::TextIndexSchema, std::allocator<void>, (__gnu_cxx::_Lock_policy)2>::_M_dispose() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/shared_ptr_base.h:616
    #20 0x76e355 in std::_Sp_counted_base<(__gnu_cxx::_Lock_policy)2>::_M_release() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/shared_ptr_base.h:346
    #21 0xd37753 in std::__shared_count<(__gnu_cxx::_Lock_policy)2>::~__shared_count() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/shared_ptr_base.h:1069
    #22 0xd37753 in std::__shared_ptr<valkey_search::indexes::text::TextIndexSchema, (__gnu_cxx::_Lock_policy)2>::~__shared_ptr() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/shared_ptr_base.h:1525
    #23 0xd37753 in std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>::~shared_ptr() /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/shared_ptr.h:175
    #24 0xd37753 in valkey_search::indexes::TextTest::~TextTest() /testing/text_test.cc:42
    #25 0xd37753 in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::~TextTest_LargeDocumentTokenization_Test() /testing/text_test.cc:314
    #26 0xd37753 in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::~TextTest_LargeDocumentTokenization_Test() /testing/text_test.cc:314
    #27 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)

previously allocated by thread T0 here:
    #0 0x7f1d55dde878 in operator new(unsigned long) /local/p4clients/pkgbuild-const/workspace/src/GCC/build/private/src/gcc-14.2.0/libsanitizer/asan/asan_new_delete.cpp:95
    #1 0xdbdf0e in valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings> valkey_search::indexes::text::InvasivePtr<valkey_search::indexes::text::Postings>::Make<>() /src/indexes/text/invasive_ptr.h:44
    #2 0xdbdf0e in AddKeyToPostings /src/indexes/text/text_index.cc:37
    #3 0xdbdf0e in operator() /src/indexes/text/text_index.cc:243
    #4 0xdbdf0e in __invoke_impl<void*, const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:61
    #5 0xdbdf0e in __invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/invoke.h:96
    #6 0xdbdf0e in invoke<const valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>&, void*> /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/functional:120
    #7 0xdbdf0e in InvokeObject<valkey_search::indexes::text::TextIndexSchema::CommitKeyData(const valkey_search::InternedStringPtr&)::<lambda(void*)>, void*, void*> /.build-release-asan/.deps/install/include/absl/functional/internal/function_ref.h:78
    #8 0xe094e6 in absl::lts_20240722::FunctionRef<void* (void*)>::operator()(void*) const /.build-release-asan/.deps/install/include/absl/functional/function_ref.h:132
    #9 0xe094e6 in MutateCallbackWrapper /src/indexes/text/rax_wrapper.cc:54
    #10 0xe1311b in raxMutate /src/indexes/text/rax/rax.c:937
    #11 0xe0c380 in valkey_search::indexes::text::Rax::MutateTarget(std::basic_string_view<char, std::char_traits<char> >, absl::lts_20240722::FunctionRef<void* (void*)>) /src/indexes/text/rax_wrapper.cc:81
    #12 0xdbb7ab in valkey_search::indexes::text::TextIndexSchema::CommitKeyData(valkey_search::InternedStringPtr const&) /src/indexes/text/text_index.cc:269
    #13 0xd18e5f in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::indexes::Text*, valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:107
    #14 0xd19470 in valkey_search::indexes::TextTest::AddRecordAndCommitKey(valkey_search::InternedStringPtr const&, std::basic_string_view<char, std::char_traits<char> >, std::shared_ptr<valkey_search::indexes::text::TextIndexSchema>) /testing/text_test.cc:115
    #15 0xd0c70c in valkey_search::indexes::TextTest_LargeDocumentTokenization_Test::TestBody() /testing/text_test.cc:323
    #16 0x1569e88 in void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (/local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests/indexes_test+0x1569e88)

SUMMARY: AddressSanitizer: heap-use-after-free /local/home/brenncat/brazil-pkg-cache/packages/GCC/GCC-14.x.86.0/AL2_x86_64/DEV.STD.PTHREAD/build/gcc-14.2.0/include/c++/14.2.0/bits/atomic_base.h:501 in std::__atomic_base<unsigned int>::load(std::memory_order) const
Shadow bytes around the buggy address:
  0x506000033a00: fd fd fd fd fa fa fa fa fd fd fd fd fd fd fd fd
  0x506000033a80: fa fa fa fa fd fd fd fd fd fd fd fd fa fa fa fa
  0x506000033b00: fa fa fa fa fa fa fa fa fa fa fa fa fd fd fd fd
  0x506000033b80: fd fd fd fd fa fa fa fa fa fa fa fa fa fa fa fa
  0x506000033c00: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa
=>0x506000033c80:[fd]fd fd fd fd fd fd fa fa fa fa fa fd fd fd fd
  0x506000033d00: fd fd fd fd fa fa fa fa fa fa fa fa fa fa fa fa
  0x506000033d80: fa fa fa fa fd fd fd fd fd fd fd fd fa fa fa fa
  0x506000033e00: fd fd fd fd fd fd fd fd fa fa fa fa fa fa fa fa
  0x506000033e80: fa fa fa fa fa fa fa fa fd fd fd fd fd fd fd fd
  0x506000033f00: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa
Shadow byte legend (one shadow byte represents 8 application bytes):
  Addressable:           00
  Partially addressable: 01 02 03 04 05 06 07 
  Heap left redzone:       fa
  Freed heap region:       fd
  Stack left redzone:      f1
  Stack mid redzone:       f2
  Stack right redzone:     f3
  Stack after return:      f5
  Stack use after scope:   f8
  Global redzone:          f9
  Global init order:       f6
  Poisoned by user:        f7
  Container overflow:      fc
  Array cookie:            ac
  Intra object redzone:    bb
  ASan internal:           fe
  Left alloca redzone:     ca
  Right alloca redzone:    cb
==6806==ABORTING
 ... failed
Test output can be found here: /local/home/brenncat/oss-workplace/valkey-search-3/.build-release-asan/tests.out
➜  valkey-search-3 git:(fulltext) ✗ 